<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>AngularJs &#8211; Stepan Suvorov Blog</title>
	<atom:link href="https://stepansuvorov.com/blog/tag/angularjs/feed/" rel="self" type="application/rss+xml" />
	<link>https://stepansuvorov.com/blog</link>
	<description>Release 2.0</description>
	<lastBuildDate>Thu, 23 May 2019 15:09:41 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=6.3.1</generator>
	<item>
		<title>Знаю ли я AngularJS?</title>
		<link>https://stepansuvorov.com/blog/2017/05/%d0%b7%d0%bd%d0%b0%d1%8e-%d0%bb%d0%b8-%d1%8f-angularjs/</link>
					<comments>https://stepansuvorov.com/blog/2017/05/%d0%b7%d0%bd%d0%b0%d1%8e-%d0%bb%d0%b8-%d1%8f-angularjs/#comments</comments>
		
		<dc:creator><![CDATA[Stepan]]></dc:creator>
		<pubDate>Sun, 21 May 2017 20:06:00 +0000</pubDate>
				<category><![CDATA[Хочу сделать мир лучше]]></category>
		<category><![CDATA[AngularJs]]></category>
		<guid isPermaLink="false">http://stepansuvorov.com/blog/?p=2963</guid>

					<description><![CDATA[Меня попросили составить список вопросов, которые смогут показать высокий уровень ваших знаний или же выявить какие-то пробелы. 1 Как получить конструктор-метод директивы из консоли? 2 Как создать новый скоуп снаружи ангуляра (не находясь внутри сущности)? 3 Чем отличается service, factory, &#8230; <a href="https://stepansuvorov.com/blog/2017/05/%d0%b7%d0%bd%d0%b0%d1%8e-%d0%bb%d0%b8-%d1%8f-angularjs/">Continue reading <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<p>Меня попросили составить список вопросов, которые смогут показать высокий уровень ваших знаний или же выявить какие-то пробелы.</p>
<p><span id="more-2963"></span></p>
<p>1 Как получить конструктор-метод директивы из консоли?</p>
<p>2 Как создать новый скоуп снаружи ангуляра (не находясь внутри сущности)?</p>
<p>3 Чем отличается service, factory, provider?</p>
<p>4 Как &#8220;выключить&#8221; вотчер?</p>
<p>5 Как использовать экземпляр сервиса внутри app.config? (Ангуляр допускает использование только провайдеров, при прямом внедрении)</p>
<p>6 В базе данных хранится ангуляровское выражение, как вывести его результат на фронтенд?</p>
<p>7 Что будет если определить 2 сущности с одним и тем же именем: для модуля, сервиса, директивы?</p>
<p>8 Если у вас есть директива1 и вложенная в нее директива2, то в каком порядке будут запущены controller и link методы этих директив?</p>
<p>9 Какой тип scope создает ui-view директива? (ui-router модуль)</p>
<p>Если у вас есть другие интересные вопросы, пожалуйста поделитесь ими в комментариях.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://stepansuvorov.com/blog/2017/05/%d0%b7%d0%bd%d0%b0%d1%8e-%d0%bb%d0%b8-%d1%8f-angularjs/feed/</wfw:commentRss>
			<slash:comments>6</slash:comments>
		
		
			</item>
		<item>
		<title>Angular + ES6 Promise</title>
		<link>https://stepansuvorov.com/blog/2016/09/angular-es6-promise/</link>
					<comments>https://stepansuvorov.com/blog/2016/09/angular-es6-promise/#comments</comments>
		
		<dc:creator><![CDATA[Stepan]]></dc:creator>
		<pubDate>Mon, 12 Sep 2016 17:43:29 +0000</pubDate>
				<category><![CDATA[Хочу сделать мир лучше]]></category>
		<category><![CDATA[AngularJs]]></category>
		<category><![CDATA[es6]]></category>
		<category><![CDATA[javascript]]></category>
		<category><![CDATA[promise]]></category>
		<guid isPermaLink="false">http://stepansuvorov.com/blog/?p=3125</guid>

					<description><![CDATA[It would be really nice if we could use native ECMAScript 2015 Promises with Angular instead of $q service that is provided from box to be close to pure JavaScript: [javascript] //somewhere inside component controller let promise = new Promise((resolve) &#8230; <a href="https://stepansuvorov.com/blog/2016/09/angular-es6-promise/">Continue reading <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<p>It would be really nice if we could use native <strong>ECMAScript 2015</strong> <strong>Promises</strong> with <strong>Angular</strong> instead of <strong>$q</strong> service that is provided from box to be close to pure JavaScript:</p>
<p>[javascript]<br />
//somewhere inside component controller<br />
let promise = new Promise((resolve) =&gt; setTimeout(() =&gt; resolve(&#8216;resolved&#8217;), 2000));<br />
promise.then(x =&gt; this.x = x);<br />
[/javascript]</p>
<p>But in this case we will have to run <strong>digest</strong> manually for each resolve(to synchronise view and model):</p>
<p>[javascript]<br />
let promise = new Promise((resolve) =&gt; setTimeout(() =&gt; resolve(&#8216;resolved&#8217;), 2000));<br />
promise.then(x =&gt; {<br />
  $scope.apply();<br />
  this.x = x;<br />
});<br />
[/javascript]</p>
<p>But what if we hack the <strong>Promise</strong> and intercept our <strong>digest</strong> call there:</p>
<p><span id="more-3125"></span></p>
<p>[javascript]<br />
class SubPromise extends Promise {<br />
  constructor(executor) {<br />
    super(function(_resolve, _reject) {<br />
      var resolve = (data) =&gt; {<br />
        var res = _resolve(data);<br />
        angular.element(document.body).injector().get(&#8216;$rootScope&#8217;).$apply();<br />
        return res;<br />
      }<br />
      return executor(resolve, _reject);<br />
    });<br />
  }<br />
}<br />
[/javascript]</p>
<p>now we just need to overwrite standard <strong>Promise</strong>:</p>
<p>[javascript]<br />
window.Promise = SubPromise;<br />
[/javascript]</p>
<p>to keep it simple to cover for <strong>unit-tests</strong> you can also wrap it into an angular <strong>factory</strong>:</p>
<p>[javascript]<br />
factory(&#8216;Promise&#8217;, () =&gt; Promise);<br />
[/javascript]</p>
<p><a href="http://plnkr.co/edit/fysuo9?p=preview">Here</a> you can play with the code.</p>
<p><a href="http://stackoverflow.com/q/35971958/274500">Discussion on stackoverflow</a> about customising ES6 Promise.</p>
<p><strong>!Attention:</strong> This experiment was made just for learning purposes and it should not be applied for the real projects.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://stepansuvorov.com/blog/2016/09/angular-es6-promise/feed/</wfw:commentRss>
			<slash:comments>2</slash:comments>
		
		
			</item>
		<item>
		<title>ui-router: Deprecated events and hooks</title>
		<link>https://stepansuvorov.com/blog/2016/07/ui-router-deprecated-events-and-hooks/</link>
					<comments>https://stepansuvorov.com/blog/2016/07/ui-router-deprecated-events-and-hooks/#comments</comments>
		
		<dc:creator><![CDATA[Stepan]]></dc:creator>
		<pubDate>Thu, 28 Jul 2016 19:28:50 +0000</pubDate>
				<category><![CDATA[Хочу сделать мир лучше]]></category>
		<category><![CDATA[AngularJs]]></category>
		<category><![CDATA[javascript]]></category>
		<category><![CDATA[ui-router]]></category>
		<guid isPermaLink="false">http://stepansuvorov.com/blog/?p=3093</guid>

					<description><![CDATA[If you are using latest version of ui-router (now it&#8217;s 1.0.0-alpha) you probably already noticed that there are no events that we all got used to: $stateChangeCancel,  $stateChangeError, $stateChangeStart, $stateChangeSuccess, $stateNotFound. All of them are deprecated in 1.0.0-alpha.3 and you can not use them &#8230; <a href="https://stepansuvorov.com/blog/2016/07/ui-router-deprecated-events-and-hooks/">Continue reading <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<p>If you are using latest version of <a href="https://github.com/angular-ui/ui-router">ui-router</a> (now it&#8217;s <strong>1.0.0-alpha</strong>) you probably already noticed that there are no events that we all got used to: <strong>$stateChangeCancel</strong>,  <strong>$stateChangeError</strong>, <strong>$stateChangeStart</strong>, <strong>$stateChangeSuccess</strong>, <strong>$stateNotFound</strong>. All of them are deprecated in 1.0.0-alpha.3 and you can not use them anymore in 1.0.0-alpha.5.</p>
<p>If you want to move to new version of ui-router you should make such changes:</p>
<p><span id="more-3093"></span></p>
<h2>$stateChangeCancel</h2>
<p>It was an event that was thrown <a href="https://github.com/angular-ui/ui-router/commit/ecefb75">when somebody called &#8220;event.preventDefault()&#8221;</a>. Now everything is controlled by transitions so no chance to get such event.</p>
<h2>$stateChangeError</h2>
<p>old code</p>
<p>[javascript]<br />
$rootScope.$on(&#8216;$stateChangeError&#8217;, function(event, toState) {<br />
    //some code to handle the error<br />
})<br />
[/javascript]</p>
<p>new code</p>
<p>[javascript]<br />
$transitions.onError({ to: &#8216;stateName&#8217; }, function($error$) {<br />
  console.log($error$);<br />
}<br />
[/javascript]</p>
<p>in progress</p>
<h2>$stateChangeStart</h2>
<p>old code</p>
<p>[javascript]<br />
$rootScope.$on(&#8216;$stateChangeStart&#8217;, function(event, toState) {<br />
    event.preventDefault();<br />
})<br />
[/javascript]</p>
<p>new code</p>
<p>[javascript]<br />
$transitions.onEnter({ to: &#8216;stateName&#8217; }, function($state$, $transition$) {<br />
  return $q.reject()<br />
}<br />
[/javascript]</p>
<h2>$stateChangeSuccess</h2>
<p>old code</p>
<p>[javascript]<br />
$rootScope.$on(&#8216;$stateChangeSuccess&#8217;, function(event) {})<br />
[/javascript]</p>
<p>new code</p>
<p>[javascript]<br />
$transitions.onSuccess({}, () =&gt; {});<br />
[/javascript]</p>
<h2>$stateNotFound</h2>
<p>old code</p>
<p>[javascript]<br />
$rootScope.$on(&#8216;$stateNotFound&#8217;, function(event) {})<br />
[/javascript]</p>
<p>new code</p>
<p>[javascript]<br />
$stateProvider.onInvalid(($to$, $from$) =&gt; {})<br />
[/javascript]</p>
<p>&nbsp;</p>
<p><a href="http://plnkr.co/edit/ahs15IQI866ZwrvxvIMe?p=preview">Sandbox</a> to play with all examples.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://stepansuvorov.com/blog/2016/07/ui-router-deprecated-events-and-hooks/feed/</wfw:commentRss>
			<slash:comments>4</slash:comments>
		
		
			</item>
		<item>
		<title>Angular Material WYSWYG Editors</title>
		<link>https://stepansuvorov.com/blog/2016/06/angular-material-wyswyg-editors/</link>
					<comments>https://stepansuvorov.com/blog/2016/06/angular-material-wyswyg-editors/#respond</comments>
		
		<dc:creator><![CDATA[Stepan]]></dc:creator>
		<pubDate>Wed, 01 Jun 2016 18:42:40 +0000</pubDate>
				<category><![CDATA[Рекомендую]]></category>
		<category><![CDATA[angular-material]]></category>
		<category><![CDATA[AngularJs]]></category>
		<category><![CDATA[javascript]]></category>
		<category><![CDATA[ngwig]]></category>
		<category><![CDATA[wysiwyg]]></category>
		<guid isPermaLink="false">http://stepansuvorov.com/blog/?p=3089</guid>

					<description><![CDATA[List of WYSWYG Editors that you can use with Angular Material. Thanks to Tim Brown.]]></description>
										<content:encoded><![CDATA[<p><a href="http://codepen.io/collection/DLepkM/"><img decoding="async" fetchpriority="high" class="alignnone size-full wp-image-3090" src="https://stepansuvorov.com/blog/wp-content/uploads/2016/06/Screen-Shot-2016-06-01-at-20.40.16.png" alt="Screen Shot 2016-06-01 at 20.40.16" width="1179" height="602" /></a></p>
<p><a href="http://codepen.io/collection/DLepkM/">List of WYSWYG Editors</a> that you can use with Angular Material. Thanks to Tim Brown.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://stepansuvorov.com/blog/2016/06/angular-material-wyswyg-editors/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>ui-router: Default child for abstract state</title>
		<link>https://stepansuvorov.com/blog/2016/05/ui-router-default-child-for-abstract-state/</link>
					<comments>https://stepansuvorov.com/blog/2016/05/ui-router-default-child-for-abstract-state/#comments</comments>
		
		<dc:creator><![CDATA[Stepan]]></dc:creator>
		<pubDate>Sat, 28 May 2016 15:08:06 +0000</pubDate>
				<category><![CDATA[Хочу сделать мир лучше]]></category>
		<category><![CDATA[AngularJs]]></category>
		<category><![CDATA[javascript]]></category>
		<category><![CDATA[ui-router]]></category>
		<guid isPermaLink="false">http://stepansuvorov.com/blog/?p=3078</guid>

					<description><![CDATA[In version 1.0.0alpha0 they finally make it possible! Child for abstract states? No! But now at least it&#8217;s possible to create own fix for it due to new $transitionsProvider, in which you could define onBefore hook. You can change the behaviour depends on &#8230; <a href="https://stepansuvorov.com/blog/2016/05/ui-router-default-child-for-abstract-state/">Continue reading <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<p>In version <strong>1.0.0alpha0</strong> they finally make it possible! Child for abstract states? No! But now at least it&#8217;s possible to create own fix for it due to new <strong>$transitionsProvider</strong>, in which you could define <strong>onBefore</strong> hook. You can change the behaviour depends on state options. Let&#8217;s use &#8220;abstract&#8221; property that is boolean and extend it: to make it possible to add child state here:</p>
<p>[javascript]<br />
$transitionsProvider.onBefore({<br />
        to: state =&gt; !!state.abstract<br />
      }, ($transition$, $state) =&gt; {<br />
        if (angular.isString($transition.to().abstract)) {<br />
          return $state.target($transition.to().abstract);<br />
        }<br />
      });<br />
[/javascript]</p>
<p>basically if abstract param is a string we set it like a target. Example of use:</p>
<p>[javascript]<br />
 .state({<br />
          name: &#8216;abstract2&#8217;,<br />
          url: &#8216;/abstract2&#8217;,<br />
          abstract: &#8216;abstract2.foo&#8217;, // redirect to &#8216;abstract2.foo&#8217;<br />
          template: &#8216;abstract2&#8217;<br />
        })<br />
[/javascript]</p>
<p><span id="more-3078"></span></p>
<p>to cover more complex case we could set it like a function:</p>
<p>[javascript]<br />
 $transitionsProvider.onBefore({<br />
        to: state =&gt; !!state.abstract<br />
      }, ($transition$, $state, $injector) =&gt; {<br />
        if (angular.isFunction($transition.to().abstract)) {<br />
          return $state.target($injector.invoke($transition.to().abstract))<br />
        }<br />
      });<br />
[/javascript]</p>
<p>and an example for an abstract state with child that is defined by function:</p>
<p>[javascript]<br />
   .state({<br />
          name: &#8216;abstract3&#8217;,<br />
          url: &#8216;/abstract3&#8217;,<br />
          abstract: function() {<br />
            return &#8216;abstract3.foo&#8217;<br />
          }, // Function redirect<br />
          template: &#8216;abstract3&#8217;<br />
        })<br />
[/javascript]</p>
<p>All code for experiments is available on <a href="http://plnkr.co/edit/vOJlRv9V7fX9G8TNqfKf?p=preview">plunker</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://stepansuvorov.com/blog/2016/05/ui-router-default-child-for-abstract-state/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
			</item>
		<item>
		<title>Understanding of component/directive attribute binding types</title>
		<link>https://stepansuvorov.com/blog/2016/02/understanding-of-componentdirective-attribute-binding-types/</link>
					<comments>https://stepansuvorov.com/blog/2016/02/understanding-of-componentdirective-attribute-binding-types/#comments</comments>
		
		<dc:creator><![CDATA[Stepan]]></dc:creator>
		<pubDate>Tue, 23 Feb 2016 20:29:02 +0000</pubDate>
				<category><![CDATA[Хочу сделать мир лучше]]></category>
		<category><![CDATA[AngularJs]]></category>
		<category><![CDATA[angularjs-component]]></category>
		<category><![CDATA[angularjs-directive]]></category>
		<guid isPermaLink="false">http://stepansuvorov.com/blog/?p=3036</guid>

					<description><![CDATA[You probably know that directive component can have 4 different attribute-scope bindings: &#8220;@&#8221; &#8211; bind a local scope property to the value of DOM attribute &#8220;=&#8221; &#8211; set up a bidirectional binding between a local scope property and an expression passed &#8230; <a href="https://stepansuvorov.com/blog/2016/02/understanding-of-componentdirective-attribute-binding-types/">Continue reading <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<p>You probably know that directive component can have 4 different attribute-scope bindings:</p>
<ul>
<li>&#8220;<strong>@</strong>&#8221; &#8211; bind a local scope property to the value of DOM attribute</li>
<li>&#8220;<strong>=</strong>&#8221; &#8211; set up a bidirectional binding between a local scope property and an expression passed via the attribute (also for collection &#8220;<strong>=*</strong>&#8221; and &#8220;<strong>=?&#8221;</strong> if attribute is optional)</li>
<li>&#8220;<strong>&lt;</strong>&#8221; &#8211; set up a one-way (one-directional) binding between a local scope property and an expression passed via the attribute</li>
<li>&#8220;<strong>&amp;</strong>&#8221; &#8211; provides a way to execute an expression in the context of the parent scope</li>
</ul>
<p>So I decided to uncover magic of this symbols and recreate their functionality by using attributes from the link function.</p>
<p><span id="more-3036"></span></p>
<p>Let&#8217;s take an example of a directive with all binding types:</p>
<p>[javascript]<br />
app.directive(&#8216;myDir&#8217;, function() {<br />
  return {<br />
    scope: {<br />
      x: &#8216;@&#8217;,<br />
      y: &#8216;=&#8217;,<br />
      z: &#8216;&lt;&#8216;,<br />
      f: &#8216;&amp;&#8217;<br />
    },<br />
    template<br />
  };<br />
});<br />
[/javascript]</p>
<p>template could be something like this:</p>
<pre>&lt;div&gt;{{x}} &lt;input ng-model="x"&gt;&lt;/div&gt;
&lt;div&gt;Hello {{y}}  &lt;input ng-model="y"&gt;&lt;/div&gt;
&lt;div&gt;Hello {{z}}  &lt;input ng-model="z"&gt;&lt;/div&gt;
&lt;div&gt;Hello {{f()}}  &lt;input&gt;&lt;/div&gt;</pre>
<p>and integration is just:</p>
<pre>&lt;my-dir x="Hello {{name}}" y="name" z="name" f="getName()"&gt;&lt;/my-dir&gt;</pre>
<p>Now we will create directive without all this scope magic param notation, but with the same binding functionality, just by using attributes of link function:</p>
<pre>&lt;my-dir2 x="Hello{{name}}" y="name" z="name" f="getName()"&gt;&lt;/my-dir2&gt;</pre>
<p>and the definition:</p>
<p>[javascript]<br />
app.directive(&#8216;myDir2&#8217;, function($interpolate, $parse) {<br />
  return {<br />
    scope: {},<br />
    template,<br />
    link: function(scope, element, attrs) {}<br />
  };<br />
});<br />
[/javascript]</p>
<p>Inside the link function we will use <strong>scope.$parent</strong> &#8211; link to parent scope and <strong>attrs</strong> &#8211; directive attributes.</p>
<h2></h2>
<h2>@</h2>
<p>Value binding is simple, only thing that we need to do is to observe attribute and update the value:</p>
<p>[javascript]<br />
attrs.$observe(&#8216;x&#8217;, value =&gt; scope.x = value);<br />
[/javascript]</p>
<p>to have immediate access inside link function we should probably also add:</p>
<p>[javascript]<br />
scope.x = $interpolate(attrs.x)(scope.$parent);<br />
[/javascript]</p>
<p>we are using <a href="https://docs.angularjs.org/api/ng/service/$interpolate">$interpolate</a> service here that will parse expression that you put into you attribute( attrs.$observe will do it by default).</p>
<h2></h2>
<h2>&lt;</h2>
<p>One way binding. The same logic like we did for first one, only in this case we need to use <strong>$watch</strong> instead of $observe (now it&#8217;s property, not attribute change) and <a href="https://docs.angularjs.org/api/ng/service/$parse"><strong>$parse</strong></a> instead of $interpolate(only one property not the expression):</p>
<p>[javascript]<br />
scope.$watch(() =&gt; $parse(attrs.z)(scope.$parent), newParentValue =&gt; scope.z = newParentValue);<br />
[/javascript]</p>
<p>and again to make it accessible in link function:</p>
<p>[javascript]<br />
scope.z = $parse(attrs.z)(scope.$parent);<br />
[/javascript]</p>
<h2></h2>
<h2>=</h2>
<p>Two-way binding. The most difficult one, because you need to synchronise value of the parent scope as well. Comparing to previous one you also need to store <strong>lastValue</strong> to understand which value has been updated: parent or directive one.</p>
<p>So first lest just try to parse the attribute:</p>
<p>[javascript]<br />
expressionFn = $parse(attrs.y);<br />
[/javascript]</p>
<p>after we can get attribute value</p>
<p>[javascript]<br />
scope.y = expressionFn(scope.$parent)<br />
[/javascript]</p>
<p>and store it like a lastValue:</p>
<p>[javascript]<br />
lastValue = scope.y;<br />
[/javascript]</p>
<p>now we should setup a watcher to check whether something was changed:</p>
<p>[javascript]<br />
scope.$watch(() =&gt; {<br />
  let parentValue = expressionFn(scope.$parent);<br />
  if (angular.equals(parentValue, scope.y)) {<br />
    return;<br />
  }<br />
});<br />
[/javascript]</p>
<p>so if parentValue and scope.y are the same we finish the function, but if not we need to synchronise either parent or directive scope. How to define whine one to synchronise? We will make comparison with lastValue:</p>
<p>[javascript]<br />
if (!angular.equals(parentValue, lastValue)) {<br />
  scope.y = parentValue;<br />
}<br />
[/javascript]</p>
<p>if they are not equal &#8211; we should sync directive scope property, otherwise &#8211; parent property. But how to do it? It could be done with help of special <a href="https://docs.angularjs.org/api/ng/service/$parse">assign</a> method:</p>
<p>[javascript]<br />
expressionFn.assign(scope.$parent, parentValue = scope.y);<br />
[/javascript]</p>
<p>And now all together:</p>
<p>[javascript]<br />
let expressionFn = $parse(attrs.y);<br />
let lastValue = scope.y = expressionFn(scope.$parent);<br />
scope.$watch(() =&gt; {<br />
  let parentValue = expressionFn(scope.$parent);<br />
  if (angular.equals(parentValue, scope.y)) {<br />
    return;<br />
  }</p>
<p>  if (!angular.equals(parentValue, lastValue)) {<br />
    scope.y = parentValue;<br />
  } else {<br />
    expressionFn.assign(scope.$parent, parentValue = scope.y);<br />
  }</p>
<p>  return lastValue = parentValue;<br />
});<br />
[/javascript]</p>
<p>&nbsp;</p>
<h2>&amp;</h2>
<p>Execute with parent scope context. Like a piece of cake:</p>
<p>[javascript]<br />
scope.f = (locals) =&gt; $parse(attrs.f)(scope.$parent, locals);<br />
[/javascript]</p>
<p>&nbsp;</p>
<p>All these examples were shown only to explain you what&#8217;s happening inside Angular and you should not use <strong>scope.$parent</strong> instead of attribute binding notation.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://stepansuvorov.com/blog/2016/02/understanding-of-componentdirective-attribute-binding-types/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
			</item>
		<item>
		<title>ng-nl 2016. brief review</title>
		<link>https://stepansuvorov.com/blog/2016/02/ng-nl-2016-brief-review/</link>
					<comments>https://stepansuvorov.com/blog/2016/02/ng-nl-2016-brief-review/#comments</comments>
		
		<dc:creator><![CDATA[Stepan]]></dc:creator>
		<pubDate>Fri, 19 Feb 2016 04:17:25 +0000</pubDate>
				<category><![CDATA[Events]]></category>
		<category><![CDATA[AngularJs]]></category>
		<category><![CDATA[conference]]></category>
		<category><![CDATA[event]]></category>
		<category><![CDATA[javascript]]></category>
		<category><![CDATA[ng-nl]]></category>
		<guid isPermaLink="false">http://stepansuvorov.com/blog/?p=3024</guid>

					<description><![CDATA[This year I also visited NG-NL Conference in Amsterdam and to keep the tradition will share my notes/thoughts about it. Basically the conference was dedicated to looking deep in Angular2 parts and reactive programming experiments. All the topics were split into 2 tracks. You &#8230; <a href="https://stepansuvorov.com/blog/2016/02/ng-nl-2016-brief-review/">Continue reading <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<p><img decoding="async" class="alignnone wp-image-3026" src="https://stepansuvorov.com/blog/wp-content/uploads/2016/02/DSC_7455.jpg" alt="ng-nl2106 label " width="184" height="275" /></p>
<p>This year I also visited <a title="http://www.ng-nl.org/" href="http://www.ng-nl.org/">NG-NL Conference in Amsterdam</a> and to <a href="https://stepansuvorov.com/blog/2015/02/ng-nl-brief-review/">keep the tradition</a> will share my notes/thoughts about it.</p>
<p>Basically the conference was dedicated to looking deep in <strong>Angular2 parts</strong> and <strong>reactive programming</strong> experiments.</p>
<p>All the topics were split into 2 tracks. You can find all the program details <a href="http://ng-nl.org/#/#programme">here</a>. My route was the following:</p>
<p><a href="https://stepansuvorov.com/blog/wp-content/uploads/2016/02/ng-nl-table-2.png"><img decoding="async" class="alignnone wp-image-3027 size-full" src="https://stepansuvorov.com/blog/wp-content/uploads/2016/02/ng-nl-table-2.png" alt="ng-nl-schedule" width="782" height="757" /></a></p>
<p><em>Because keynote talks were not separated and columns were not sync in time you could get the illusion of time jump</em>.</p>
<p><span id="more-3024"></span></p>
<h2>Awesome Productivity with Angular 2 (<a href="https://www.youtube.com/watch?v=1RzYpIAn-3g">video</a>)</h2>
<p><a href="https://twitter.com/martin_probst">Martin Probst</a> started keynote with kind of excuse why we need to do step forward -&#8220;<em>frameworks have to move</em>&#8221; &#8211; that sounds really funny. Probably it was soft launch or preparation not to scary developers with new features.</p>
<p>After it was quick introduction of all new things in Angular2. New <strong>template syntax</strong> that gets rid of tons nested directives and uses explicit attribute binding, and you always know whether it is property, event or two-way binding:</p>
<ul>
<li><strong>[property]</strong> &#8211; property binding</li>
<li><strong>(event)</strong> &#8211; event binding</li>
<li><strong>[(two-way)]</strong> &#8211; two-way biding (still confusing)</li>
</ul>
<p>Some words about the <strong>component concept</strong> that will kill old directives, scopes, controllers. Exact announcement about <strong>performance</strong>: Angular2 is 4-times faster than Angular1.</p>
<p>Martin also said that team works not only on framework but also on the environment. To make dev tools unified and productive. So <a href="https://github.com/angular/angular-cli">angular-cli</a>.</p>
<p>And it was a part why we should use <strong>TypeScript</strong>:</p>
<ul>
<li>makes code more reliable</li>
<li>much better doc generation</li>
<li>allows autocompletion</li>
<li>gives safer API changes</li>
<li>fast API renaming</li>
</ul>
<p>And, of course, the statement that we can easily use Angular2 without TypeScript is not true, using Angular2 without TypeScript is hard pain: even examples on official site are not always up-to-date.</p>
<p>Well, it was quite informative, thank you!</p>
<h2>ngUpgrade Your App to Angular 2 (slides coming soon, video coming soon)</h2>
<p>It was light talk by <a href="https://twitter.com/teropa">Tero Parviainen</a> who showed the step by step migration to Angular2 with help of <strong>ngUpgrade</strong>.</p>
<p>When you have ideal decoupled component application you can start with ngUpgrade:</p>
<p>[javascript]<br />
import {UpgradeAdapter} from &#8216;angular2/upgrade&#8217;;</p>
<p>var adapter = new UpgradeAdapter();<br />
var app = angular.module(&#8216;myApp&#8217;, []);</p>
<p>adapter.bootstrap(document.body, [&#8216;myApp&#8217;]);<br />
[/javascript]</p>
<p>and to have new components in old project you should you such hack:</p>
<p>[javascript]<br />
app.directive(&#8216;productDetail&#8217;,<br />
  adapter.downgradeNg2Component(ProductDetail));<br />
[/javascript]</p>
<p>and the same goes for services:</p>
<p>[javascript]<br />
adapter.addProvider(ProductService);<br />
[/javascript]</p>
<p>But when you code is not ideal (that we usually call real life) you have to solve all architectural issues first and only then do ngUpgrade manipulations.</p>
<p>Fist step could be to remove all ng-include and ng-controller statements and replace them into components. For more detailed instructions check <a href="http://teropa.info/blog/2015/10/18/refactoring-angular-apps-to-components.html">this Tero&#8217;s article</a>.</p>
<p><strong>@Tero</strong>, the way of presenting information by commenting code videos works perfectly!</p>
<p>&nbsp;</p>
<h2>How to Write a Library for Angular 2 (<a href="http://slides.com/ocombe/ngnl2016#/">slides</a>, video coming soon)</h2>
<p><a href="https://twitter.com/OCombe">Olivier Combe</a> was making fast coding talk about steps of Angular2 library creation.</p>
<p>First of all it would be better to make workshop out of this talk, to let everyone do the same steps. Because when you don&#8217;t do it simultaneously all the steps looks so obvious.</p>
<p>I know Olivier, that&#8217;s not his first conference in speaker role, but he was nervous and all talk was in a hurry, it looked like he&#8217;d prepared presentation for an hour and was told to make it in 15 minutes.</p>
<p>There were some hint how to setup Karma preprocessors for TypeScript.</p>
<p>Did not know about <a href="https://docs.npmjs.com/misc/developers#keeping-files-out-of-your-package">.nmpignore file</a> before.</p>
<p><strong>@Olivier</strong>, it would be really nice addition if you put some code and commands into your presentation.</p>
<p>&nbsp;</p>
<h2>Angular 2 Change Detection Explained (<a href="http://pascalprecht.github.io/slides/angular-2-change-detection-explained/#/">slides</a>, <a href="https://www.youtube.com/watch?v=CUxD91DWkGM">video</a>)</h2>
<p>Couldn&#8217;t miss <a href="https://twitter.com/PascalPrecht">Pascal Precht</a> talk and switched to track2 for it. Should also say that room was <a href="https://stepansuvorov.com/blog/wp-content/uploads/2016/02/DSC_7434.jpg">overcrowded</a>.</p>
<p>The talk started with explaining the problem that we want to solve &#8211; basically it&#8217;s Model &#8211; DOM synchronisation. (recommended reading &#8220;<a href="http://teropa.info/blog/2015/03/02/change-and-its-detection-in-javascript-frameworks.html">Change And Its Detection In JavaScript Frameworks</a>&#8221; by Tero Parviainen) Model could be changed by:</p>
<ul>
<li>events (click, submit)</li>
<li>ajax requests and fetching data from remote source</li>
<li>timers</li>
</ul>
<p>and how Angular gets known about it? &#8211;  ZONES!</p>
<p>Some explanation about async flow magic and back to zones:</p>
<p>[javascript]<br />
zone.run(() =&gt; {<br />
  foo();<br />
  setTimeout(doSth, 0);<br />
  bar();<br />
});<br />
[/javascript]</p>
<p>and for Angular2 it&#8217;s <a href="https://angular.io/docs/js/latest/api/core/NgZone-class.html">ngZone</a>.</p>
<p>More details in <a href="http://blog.thoughtram.io/angular/2016/01/22/understanding-zones.html">Understanding Zones</a> and <a href="http://blog.thoughtram.io/angular/2016/02/01/zones-in-angular-2.html">Zones in Angular 2</a>.</p>
<p>Smart change detection with<strong> immutable objects</strong>: it&#8217;s easy to check whether object has changed or not.</p>
<p><strong>ChangeDetectionStrategy.OnPush</strong> &#8211; where you could setup logic and do not update component each time.</p>
<p><strong>Observables</strong> to setup change &#8220;listener&#8221; only for specific component.</p>
<p><strong>@Pascal</strong>, waiting for your superduper demo examples code :)</p>
<h2></h2>
<p>&nbsp;</p>
<h2>Lunch</h2>
<p>During lunch brake I had a chance to speak to <a href="https://twitter.com/IgorMinar">Igor Minar</a> and <a href="https://twitter.com/martin_probst">Martin Probst</a>, asked them about <strong>TypeScript</strong> like an extra complexity to move a project to Angular2. It looks like they are going solid for it, even with future ES7 and decorators. So if you want to use Angular2 you MUST learn TypeScript. It was a good advice from Martin to try TypeScript with current Angular1.X version and only after, when we are confident enough move to Angular2 and use it together. Let&#8217;s see how far we will go.</p>
<p>&nbsp;</p>
<h2>Reactive Angular 2 (<a href="https://docs.google.com/presentation/d/1dC4oyxrE5IqDSJpKI_akszfFgBx24vC7YDYzmbrvnmM/edit#slide=id.p">slides</a>, <a href="https://www.youtube.com/watch?v=xAEFTSMEgIQ">video</a>)</h2>
<p>It was life coding with <a href="https://twitter.com/robwormald">Rob Wormald</a>. He lifted the curtain of <strong>reactive programming</strong>. We made Typeahead component with <strong>Observables</strong>, it was really nice example to show how to put everything in one stream. Then we created chat app with firebase. And after it was Todo app with Redux. Third one was really difficult to follow.</p>
<p>Related example from Rob suddenly found on internet &#8211; <a href="http://plnkr.co/edit/NfRZv6aY5OpaljKuzEym?p=preview">plnk</a>.</p>
<p>&nbsp;</p>
<h2>Introduction to RxJS 5 (<a href="http://slides.com/gerardsans/ng-nl-rxjs5#/">slides</a>, <a href="https://www.youtube.com/watch?v=loYkHSQ_4Dg">video</a>)</h2>
<p>More reactive stuff from <a href="https://twitter.com/gerardsans">Gerard Sans</a>. History of streams: <strong>pipes</strong>(unix, 1973) &#8211; &gt; <strong>streams</strong>(node.js, 2009) -&gt; <strong>observables</strong> (Microsoft, 2012) -&gt;<strong>observables</strong> (Angular2, 2014). Some obvious things that you can do with array in ES5 like forEach, map, filter, reduce. Examples with Observables. Subscribe. No debugger support yet.</p>
<p>RxJs could be implementation in Angular2 for:</p>
<ul>
<li>asynchronous processing</li>
<li>http</li>
<li>forms: controls, validation</li>
<li>component events</li>
</ul>
<p>&#8230;and again Typeahead component example (<a href="http://plnkr.co/edit/B4BxDWgegexn7gq6qql4?p=preview">plnk</a>), now with nicer styles.</p>
<p>&nbsp;</p>
<h2>Angular 2 and the Single Immutable State Tree (<a href="https://speakerdeck.com/cironunes/angular-2-and-the-single-immutable-state-tree">slides</a>, video coming soon)</h2>
<p>Talk of <a href="https://twitter.com/cironunesdev">Ciro Nunes</a> about immutables has a lot in common with Pascal&#8217;s &#8220;Angular 2 Change Detection Explained&#8221;.</p>
<p>pure function &#8211; returns new object.</p>
<p><strong>ChangeDetectionStrategy.OnPush</strong></p>
<p><strong>Redux</strong> &#8211; unidirectional data flow.</p>
<p>Angular implementation</p>
<p>[javascript]<br />
const appStore = createStore(rootReducer);<br />
bootstrap(App, [<br />
   provide(&#8216;AppStore&#8217;, {userValue: appStore}),<br />
   Actions<br />
]);<br />
[/javascript]</p>
<p>or</p>
<ul>
<li><a href="https://github.com/ngrx/store" rel="nofollow">ngrx/store</a></li>
<li><a href="http://victorsavkin.com/post/137821436516/managing-state-in-angular-2-applications">Managing state in Angular2 applications </a></li>
</ul>
<p><strong>@Ciro</strong>, it looks like 3rd link under presentation is broken.</p>
<p>&nbsp;</p>
<h2>The new Component Router for Angular 2 and 1.x (<a href="http://de.slideshare.net/ManfredSteyer1/angular-2-and-15-routing">slides</a>, video coming soon)</h2>
<p><a href="https://twitter.com/ManfredSteyer">Manfred Steyer</a> started with some kind of fast slides, some of them with German notation.</p>
<p>Router LIfe Cycle Callbacks:</p>
<ul>
<li>onActivate</li>
<li>onDeactivate</li>
<li>canDeactivate</li>
<li>@canActivate</li>
</ul>
<p>Nice concept of honest authorisation with checkbox only :)</p>
<p>Lazy loading for components is there.</p>
<p>Router part inside each component:</p>
<p>[javascript]<br />
app.component(&#8216;bookFlight&#8217;,  {<br />
    controller: BookFlightController,<br />
    templateUrl: &#8216;components/book-flight/book-flight.html&#8217;,<br />
    $routeConfig: [<br />
        { path: &#8216;/&#8217;, component: &#8216;passenger&#8217;, name: &#8216;Passenger&#8217; },<br />
        { path: &#8216;/flight&#8217;, component: &#8216;flight&#8217;, name: &#8216;Flight&#8217;, useAsDefault: true },<br />
        { path: &#8216;/booking&#8217;, component: &#8216;booking&#8217;, name: &#8216;Booking&#8217; },<br />
        { path: &#8216;/passenger/:id&#8217;, component: &#8216;passengerEdit&#8217;, name: &#8216;PassengerEdit&#8217; }<br />
    ]<br />
}); </p>
<p>[/javascript]</p>
<p>Access control could be done via @canActivate:</p>
<p>[javascript]<br />
app.component(&#8216;passengerEdit&#8217;, {<br />
    controller: PassengerEditController,<br />
    template: passengerEditTemplate,<br />
    $canActivate: () =&gt; {<br />
        console.debug(&quot;$canActivate&quot;);<br />
        return true;<br />
    }<br />
});<br />
[/javascript]</p>
<p>Can be installed in Angular1 via ng-controller, unfortunately did not find this place in your code.</p>
<p>Link to router config examples: <a href="https://github.com/manfredsteyer/angular-2-component-router-sample/blob/master/app.js">Angular2</a> and <a href="https://github.com/manfredsteyer/angular-1.5-component-router/blob/master/wwwroot/app/app.ts">Angular1.5</a></p>
<p><strong>@Manfred</strong>, I think it should be some piece of code that goes after each model slide for better understanding. Second thing &#8211; we don&#8217;t need ControllerAs for Angular1.5 anymore.</p>
<p>&nbsp;</p>
<h2>Rendering in Angular 2  (<a href="http://zizzamia.github.io/rendering-in-angular-2/">slides</a>, <a href="https://www.youtube.com/watch?v=IbLO08NMMXY">video</a>)</h2>
<p><a href="https://twitter.com/Zizzamia">Leonardo Zizzamia</a> presented one more topic about trying to solve problem of synchronising Model and UI.</p>
<p>Render decoupling to make it possible to use different renders. Make it possible to have the same code base, same templates for different platforms.</p>
<p><a href="https://github.com/matsko/angular2-canvas-renderer-experiment">Canvas Root Render</a></p>
<p>Angular2 Rendering is still in beta</p>
<p>and nice app &#8211; https://getplan.co based on Angualr1.4.9 (still migrating to 2)</p>
<p>&nbsp;</p>
<h2>Which Way Is Up? (<a href="https://www.youtube.com/watch?v=oO0b7iplgYY">video</a>)</h2>
<p><a href="https://twitter.com/toddmotto">Todd Motto</a> told us a nice story about Jerry, a pirat-packman-developer<img decoding="async" loading="lazy" class="alignnone size-full wp-image-3030" src="https://stepansuvorov.com/blog/wp-content/uploads/2016/02/DSC_7453.jpg" alt="Jerry js " width="1478" height="979" /></p>
<p>I&#8217;ll not retell you the story, better wait for the video ;)</p>
<p>Todd just assembled all our doubts and fears about JS boom(what technology to use?), open source and participating in community life.</p>
<p>Some lessons from the story:</p>
<ul>
<li>don&#8217;t be scared of new technologies</li>
<li>but don&#8217;t try to use them all at once, just keep an eye on them</li>
<li>contribute to open source projects &#8211; the great way of knowledge sharing</li>
<li>you know it well only when you can explain it well &#8211; write a blog, explain your thoughts</li>
<li>and keep in mind:</li>
</ul>
<p style="font-size: 29px;">Nothing was achieved in comfort zone!</p>
]]></content:encoded>
					
					<wfw:commentRss>https://stepansuvorov.com/blog/2016/02/ng-nl-2016-brief-review/feed/</wfw:commentRss>
			<slash:comments>6</slash:comments>
		
		
			</item>
		<item>
		<title>AngularJS: от directive() к component()</title>
		<link>https://stepansuvorov.com/blog/2016/02/angularjs-%d0%be%d1%82-directive-%d0%ba-component/</link>
					<comments>https://stepansuvorov.com/blog/2016/02/angularjs-%d0%be%d1%82-directive-%d0%ba-component/#comments</comments>
		
		<dc:creator><![CDATA[Stepan]]></dc:creator>
		<pubDate>Wed, 17 Feb 2016 21:06:11 +0000</pubDate>
				<category><![CDATA[Хочу сделать мир лучше]]></category>
		<category><![CDATA[Angular2]]></category>
		<category><![CDATA[AngularJs]]></category>
		<category><![CDATA[angularjs-component]]></category>
		<category><![CDATA[angularjs-directive]]></category>
		<category><![CDATA[javascript]]></category>
		<guid isPermaLink="false">http://stepansuvorov.com/blog/?p=3019</guid>

					<description><![CDATA[пост был подготовлен на основе статьи Exploring the Angular 1.5 .component() method от Todd Moto. В Angular 1.5 нам был представлен новый метод .component(), который намного проще чем .directive() и при этом он использует все лучшее по умолчанию. Метод .component() также позволит разработчикам &#8230; <a href="https://stepansuvorov.com/blog/2016/02/angularjs-%d0%be%d1%82-directive-%d0%ba-component/">Continue reading <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<p><em>пост был подготовлен на основе статьи <a href="https://toddmotto.com/exploring-the-angular-1-5-component-method/">Exploring the Angular 1.5 .component() method </a>от Todd Moto</em>.</p>
<p>В <strong>Angular 1.5</strong> нам был представлен новый метод <strong>.component()</strong>, который намного проще чем <strong>.directive()</strong> и при этом он использует все лучшее по умолчанию. Метод <strong>.component()</strong> также позволит разработчикам писать в <strong>Angular2</strong> стиле, то есть сделает переход на вторую версию максимально безболезненным.</p>
<p>В этом посте мы попробуем параллельно разобрать старый и новый подходы для создания компонентов.</p>
<p><span id="more-3019"></span></p>
<p>На примере простой директивы <strong>counter</strong> мы посмотрим как можно создать компонент с аналогичной функциональностью:</p>
<p>[javascript]<br />
.directive(&#8216;counter&#8217;, function counter() {<br />
  return {<br />
    scope: {},<br />
    bindToController: {<br />
      count: &#8216;=&#8217;<br />
    },<br />
    controller: function () {<br />
      function increment() {<br />
        this.count++;<br />
      }<br />
      function decrement() {<br />
        this.count&#8211;;<br />
      }<br />
      this.increment = increment;<br />
      this.decrement = decrement;<br />
    },<br />
    controllerAs: &#8216;counter&#8217;,<br />
    template: [<br />
      &#8216;<br />
&lt;div class=&quot;todo&quot;&gt;&#8217;,<br />
        &#8216;&lt;input type=&quot;text&quot; ng-model=&quot;counter.count&quot;&gt;&#8217;,<br />
        &#8216;&lt;button type=&quot;button&quot; ng-click=&quot;counter.decrement();&quot;&gt;-&lt;/button&gt;&#8217;,<br />
        &#8216;&lt;button type=&quot;button&quot; ng-click=&quot;counter.increment();&quot;&gt;+&lt;/button&gt;&#8217;,<br />
      &#8216;&lt;/div&gt;<br />
&#8216;<br />
    ].join(&#8221;)<br />
  };<br />
});<br />
[/javascript]</p>
<p>вот как это будет выглядеть:</p>
<p><iframe loading="lazy" src="//jsfiddle.net/STEVER/8e59shvc/embedded/" width="100%" height="300" frameborder="0" allowfullscreen="allowfullscreen"></iframe></p>
<h2>Объект вместо Функции</h2>
<p>Начнем наш анализ со способа задания и обратим внимание на то, что <span style="text-decoration: underline;">параметры в компонент передаются как объект</span> (а не функция, что было в директиве):</p>
<p>[javascript]<br />
// до<br />
.directive(&#8216;counter&#8217;, function counter() {<br />
  return {<br />
  };<br />
});</p>
<p>// после<br />
.component(&#8216;counter&#8217;, {</p>
<p>});<br />
[/javascript]</p>
<h2>Scope и BindToController становятся просто Bindings</h2>
<p>В директиве мы можем задавать <strong>scope</strong> 3-мя способами: родительский(скоуп не создается), наследник от родительского, изолированный. Со временем мы приходим к выводу, что изолированный скоуп, где мы четко задаем входящие параметры, наилучший вариант. Так же каждый раз для изолированного скоупа нам приходиться прописывать <strong>bindToController</strong>, чтобы прокинуть данные со скоупа непосредственно на контроллер директивы.</p>
<p>Свойство компонента <strong>bindings</strong> позволяет использовать 2 в одном, так как компонент использует изолированный скоуп по умолчанию:</p>
<p>[javascript]<br />
// before<br />
.directive(&#8216;counter&#8217;, function counter() {<br />
  return {<br />
    scope: {},<br />
    bindToController: {<br />
      count: &#8216;=&#8217;<br />
    }<br />
  };<br />
});</p>
<p>// after<br />
.component(&#8216;counter&#8217;, {<br />
  bindings: {<br />
    count: &#8216;=&#8217;<br />
  }<br />
});<br />
[/javascript]</p>
<h2>Controller и ControllerAs</h2>
<p>Ничего не изменилось в способе задания контроллера, однако теперь <strong>controllerAs</strong> параметр по умолчанию, который задан как &#8220;<strong>$ctrl</strong>&#8220;: то есть если мы в контроллере напишем:</p>
<p>[javascript]<br />
this.x = 5;<br />
[/javascript]</p>
<p>то в шаблоне компонента потом можно будет обратиться вот так:</p>
<p>[html]<br />
&lt;div&gt;{{$ctrl.x}}&lt;/div&gt;<br />
[/html]</p>
<p>Итак, что у нас получилось с контроллером для обоих случаев:</p>
<p>[javascript]<br />
// до<br />
.directive(&#8216;counter&#8217;, function counter() {<br />
  return {<br />
    scope: {},<br />
    bindToController: {<br />
      count: &#8216;=&#8217;<br />
    },<br />
    controller: function () {<br />
      function increment() {<br />
        this.count++;<br />
      }<br />
      function decrement() {<br />
        this.count&#8211;;<br />
      }<br />
      this.increment = increment;<br />
      this.decrement = decrement;<br />
    },<br />
    controllerAs: &#8216;counter&#8217;<br />
  };<br />
});</p>
<p>// после<br />
.component(&#8216;counter&#8217;, {<br />
  bindings: {<br />
    count: &#8216;=&#8217;<br />
  },<br />
  controller: function () {<br />
    function increment() {<br />
      this.count++;<br />
    }<br />
    function decrement() {<br />
      this.count&#8211;;<br />
    }<br />
    this.increment = increment;<br />
    this.decrement = decrement;<br />
  }<br />
});<br />
[/javascript]</p>
<p>Я очень упростил для понимания пункт из статьи, поэтому рекомендую также заглянуть в оригинал.</p>
<h2>Шаблоны</h2>
<p>В определении шаблонов есть небольшое различие: шаблон компонента может задаваться как функция, в которую инжектятся элемент и атрибуты:</p>
<p>[javascript]<br />
{<br />
  &#8230;<br />
  template: function ($element, $attrs) {<br />
    // access to $element and $attrs<br />
    return &#8216;&#8230;&#8217;;<br />
  }<br />
  &#8230;<br />
}<br />
[/javascript]</p>
<h2>Улучшенное require</h2>
<p>Да, это свершилось! Теперь мы можем задать имя для контроллера, подключаемого к нашему компоненту, и обратиться к нему из контроллера( до этого только из метода link, а в контроллер оно попадало только <a href="https://github.com/angular/angular.js/issues/5893">путем ужасных костылей</a>):</p>
<p>[javascript]<br />
{<br />
  &#8230;<br />
  require: {<br />
    parent: &#8216;^parentComponent&#8217;<br />
  },<br />
  controller: function () {<br />
    // use this.parent to access required Objects<br />
    this.parent.foo();<br />
  }<br />
  &#8230;<br />
}<br />
[/javascript]</p>
<p>В данном случае мы определили подключаемый контроллер на свойстве <strong>parent</strong>.</p>
<h2>Одностороннее связывание</h2>
<p>Еще одна фишка компонентов и <strong>Angular1.5</strong> это одностороннее связывание, которое определяется следующим синтаксисом:</p>
<p>[javascript]<br />
{<br />
  &#8230;<br />
  bindings: {<br />
    oneWay: &#8216;&lt;&#8216;,<br />
    twoWay: &#8216;=&#8217;<br />
  },<br />
  &#8230;<br />
}<br />
[/javascript]</p>
<p>если мы задали свойство <em>oneWay</em> таким образом, то оно будет реагировать на изменения внешнего связанного объекта, при этом свои изменения передавать &#8220;наружу&#8221; не будет. И да, сразу отвечу на вопрос, который у вас наверное появился: <span style="text-decoration: underline;">работает только в одну сторону</span>.</p>
<h2>Нет никакого нового концепта</h2>
<p>Если вы посмотрите на <a href="https://github.com/angular/angular.js/blob/master/src/ng/compile.js#L1076">исходный код</a>, то увидите что разработчики AngularJS особо не парились и сделали метод <strong>component()</strong> просто оболочкой над <strong>directive()</strong>.</p>
<h2>Обновляемся до Angular2</h2>
<p>Как уже было сказано: использование метода <strong>.component()</strong> серьезно упростит переход на <strong>Angular2</strong>. Посмотрите как будет выглядеть ваш компонент во второй версии фреймворка(конечно, с новым синтаксисом шаблонов):</p>
<p>[javascript]<br />
var Counter = ng<br />
.Component({<br />
  selector: &#8216;counter&#8217;,<br />
  template: [<br />
    &#8216;<br />
&lt;div class=&quot;todo&quot;&gt;&#8217;,<br />
      &#8216;&lt;input type=&quot;text&quot; [(ng-model)]=&quot;count&quot;&gt;&#8217;,<br />
      &#8216;&lt;button type=&quot;button&quot; (click)=&quot;decrement();&quot;&gt;-&lt;/button&gt;&#8217;,<br />
      &#8216;&lt;button type=&quot;button&quot; (click)=&quot;increment();&quot;&gt;+&lt;/button&gt;&#8217;,<br />
    &#8216;&lt;/div&gt;<br />
&#8216;<br />
  ].join(&#8221;)<br />
})<br />
.Class({<br />
  constructor: function () {<br />
    this.count = 0;<br />
  },<br />
  increment: function () {<br />
    this.count++;<br />
  },<br />
  decrement: function () {<br />
    this.count&#8211;;<br />
  }<br />
});<br />
[/javascript]</p>
]]></content:encoded>
					
					<wfw:commentRss>https://stepansuvorov.com/blog/2016/02/angularjs-%d0%be%d1%82-directive-%d0%ba-component/feed/</wfw:commentRss>
			<slash:comments>10</slash:comments>
		
		
			</item>
		<item>
		<title>AngularJS советы от команды PayPal</title>
		<link>https://stepansuvorov.com/blog/2015/11/angularjs-%d1%81%d0%be%d0%b2%d0%b5%d1%82%d1%8b-%d0%be%d1%82-%d0%ba%d0%be%d0%bc%d0%b0%d0%bd%d0%b4%d1%8b-paypal/</link>
					<comments>https://stepansuvorov.com/blog/2015/11/angularjs-%d1%81%d0%be%d0%b2%d0%b5%d1%82%d1%8b-%d0%be%d1%82-%d0%ba%d0%be%d0%bc%d0%b0%d0%bd%d0%b4%d1%8b-paypal/#comments</comments>
		
		<dc:creator><![CDATA[Stepan]]></dc:creator>
		<pubDate>Sun, 08 Nov 2015 10:09:15 +0000</pubDate>
				<category><![CDATA[Хочу сделать мир лучше]]></category>
		<category><![CDATA[AngularJs]]></category>
		<category><![CDATA[paypal]]></category>
		<guid isPermaLink="false">http://stepansuvorov.com/blog/?p=2874</guid>

					<description><![CDATA[Перевод/формат статьи &#8220;Sane, scalable Angular apps are tricky, but not impossible. Lessons learned from PayPal Checkout.&#8221; (Очень радует, что на зло всем критикам появляется все больше и больше серьезных приложений на AngularJS) Все нижеизложенные рекомендации касается только Angular 1.x, мы не &#8230; <a href="https://stepansuvorov.com/blog/2015/11/angularjs-%d1%81%d0%be%d0%b2%d0%b5%d1%82%d1%8b-%d0%be%d1%82-%d0%ba%d0%be%d0%bc%d0%b0%d0%bd%d0%b4%d1%8b-paypal/">Continue reading <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<p>Перевод/формат статьи &#8220;<a href="https://medium.com/@bluepnume/sane-scalable-angular-apps-are-tricky-but-not-impossible-lessons-learned-from-paypal-checkout-c5320558d4ef#.kokbk5818">Sane, scalable Angular apps are tricky, but not impossible. Lessons learned from PayPal Checkout</a>.&#8221;</p>
<p>(<em>Очень радует, что на зло всем критикам появляется все больше и больше серьезных приложений на AngularJS</em>)</p>
<p><span id="more-2874"></span></p>
<p>Все нижеизложенные рекомендации касается только Angular 1.x, мы не говорим по второй версии фреймворка, для которой вероятно существуют свои рекомендации.</p>
<h2>Не используйте ng-controller</h2>
<p>ng-controller &#8211; это что-то типа тумблера для быстрого включения магии Ангуляра, вы добавляете атрибут на страницу &#8211; и вы на коне: все сразу стало динамическим, теперь можно использовать переменные из scope:</p>
<pre id="62ed">&lt;div ng-controller="myController"&gt;
  &lt;strong&gt;{{foo}}&lt;/strong&gt;
&lt;/div&gt;</pre>
<ul>
<li style="list-style-type: none;">
<ul>
<li data-wpview-marker="https%3A%2F%2Fmedium.com%2F%40bluepnume%2Fsane-scalable-angular-apps-are-tricky-but-not-impossible-lessons-learned-from-paypal-checkout-c5320558d4ef%23.kokbk5818">Этот паттерн не заставляет нас делать строгое связывание контроллера с шаблоном, которое свойственно для компонент-ориентированных приложений</li>
</ul>
</li>
</ul>
<ul>
<li style="list-style-type: none;">
<ul>
<li data-wpview-marker="https%3A%2F%2Fmedium.com%2F%40bluepnume%2Fsane-scalable-angular-apps-are-tricky-but-not-impossible-lessons-learned-from-paypal-checkout-c5320558d4ef%23.kokbk5818">При таком подходе вы можете использовать контроллер только в одном месте и только с определенными правилами того, что вы помещаете в $scope</li>
</ul>
</li>
</ul>
<ul>
<li data-wpview-marker="https%3A%2F%2Fmedium.com%2F%40bluepnume%2Fsane-scalable-angular-apps-are-tricky-but-not-impossible-lessons-learned-from-paypal-checkout-c5320558d4ef%23.kokbk5818">Существует слишком много в корне отличных способов подключения контроллера к приложению, что само по себе создает сложности в последующем разборе кода</li>
</ul>
<pre>[javascript]
$routeProvider.
      when('/phones', {
        templateUrl: 'partials/phone-list.html',
        controller: 'PhoneListCtrl'
      });
[/javascript]</pre>
<p>В чем проблема? Это работает только для стейтов. Если я захочу использовать мой компонент в месте, не связанном ни с одним из стейтов, то мне придется использовать уже другой паттерн подключения контроллера.</p>
<p>Так как же избежать такой неоднородности? Как выбрать один правильный вариант, и ответ..</p>
<h2>Делайте все используя директивы</h2>
<p>Серьезно, абсолютно все, включая страницы целиком:</p>
<pre>[javascript]
myapp.directive('foo', function() {
    return {
        scope: {},
        template: myTemplate,
        controller: function($scope) {
            $scope.foo = 'bar';
        }
    };
});
[/javascript]</pre>
<p>Теперь мы можем использовать компонент &lt;foo&gt;&lt;/foo&gt; для любых случаев:</p>
<ul>
<li>это всегда гарантирует использование одного и того же контроллера и шаблона</li>
<li>вы можете передавать атрибуты для изменения поведения</li>
<li>вы можете определить коллбэк, который будет вызван, когда в вашем элементе произойдет какое-то событие</li>
<li>он имеет изолированный скоуп, то есть: вам не нужно переживать за лексическое окружение родителя</li>
</ul>
<p>Но как тогда настроить роутер? Да вообще-то довольно просто:</p>
<pre>[javascript]
$routeProvider.
      when('/phones', {
        template: '&amp;amp;amp;amp;amp;lt;phone-list&amp;amp;amp;amp;amp;gt;&amp;amp;amp;amp;amp;lt;/phone-list&amp;amp;amp;amp;amp;gt;',
      });
[/javascript]</pre>
<p>Теперь все приложение в одном компоненте, включая страницу целиком, и при этом все ваши компоненты сделаны единообразно. Это серьезно повышает читабельность, понятность кода, а главное &#8211; его повторное использование.</p>
<h2>Всегда используйте изолированный scope</h2>
<p>Директивы по умолчанию наследуют родительский скоуп. Это не самая лучшая архитектура. Мы рекомендуем использовать изолированный скоуп:</p>
<pre>scope: {}
</pre>
<p>гарантируя тем самым, что мы не можем случайно изменить родительский контекст. Это правило помогает нам избавиться от случайных абстракций между компонентом и его родителем.</p>
<p>Еще одна забавная вещь предложенная нам AngularJS:</p>
<pre>scope: true
</pre>
<p>которая создает новый скоуп для директивы, но при этом прототипно наследуя его от родительского. С точки зрения компонентно-ориентированого приложения это ужасно. <span style="text-decoration: underline;">Просто используйте изолированный скоуп</span>.</p>
<h2 id="4064" class="graf--p graf-after--p">Связывайте свойство объекта, а не сам объект</h2>
<p class="graf--p graf-after--p">AngularJs предоставляет двойное связывание через ng-model. Но при этом вот так лучше не делать:</p>
<pre id="f56c" class="graf--pre graf-after--p">&lt;input type="text" ng-model="username" /&gt;</pre>
<p>Видите проблему? Нет? А она есть! Суть в том, что вы пытаетесь связать свойство родительского скоупа, и при этом не обязательно понимаете какой из скоупов это будет.</p>
<p>Это уже <a href="https://github.com/angular/angular.js/issues/7216">где только не обсуждалось</a>, отметим лишь только то, что, если вы так делаете, вы обрекаете себя на проблемы, которые будет трудно отладить в будущем. Например: для того же случая с <strong>ng-if</strong>, когда вы создаете новый скоуп и уже совсем не понятно будет ли ваш код продолжать дальше работать или нет.</p>
<p>Так как гарантировать, что ng-model всегда связана со скоупом вашей директивы? Просто запомнить:</p>
<ol>
<li>Создавайте объект-контейнер внутри вашей директивы</li>
<li>Связывайте ваш инпут со свойством этого объекта, но не свойством объекта $scope</li>
</ol>
<p>то есть:</p>
<pre id="1b13" class="graf--pre graf-after--li">&lt;input type="text" ng-model="user.name" /&gt;</pre>
<p>(<em>прим.: либо всегда используйте синтаксис<strong> Controller As</strong></em>)</p>
<h2>Ограничьте использование $rootScope</h2>
<p>Вы когда нибудь слышали, что глобальные переменные &#8211; это зло? Так вот представьте, что $rootScope &#8211; это тоже глобальная переменная. По мере того как ваше приложение растет, становится все сложнее отслеживать помещенные туда свойства.</p>
<p>Не храните значение состояния там, лучше..</p>
<h2>Храните состояние как можно ближе к элементу</h2>
<p>Если у вас есть 3 компонента на странице и они используют одни и те же данные, то просто заверните их в еще один компонент и определите данные на полученном скоупе.</p>
<p>Это очень просто сделать с директивами, определив какие параметры вы хотите принять:</p>
<pre>[javascript]
myapp.directive('foo', function() {
    return {
        scope: {
            bar: '='
        },
        template: myTemplate,
        controller: function($scope) {
            console.log($scope.bar);
        }
    };
});
[/javascript]</pre>
<p>И передать их соответственно:</p>
<pre id="3f6b" class="graf--pre graf-after--p">&lt;foo bar="baz"&gt;&lt;/foo&gt;</pre>
<h2>Забудьте о сервисах и провайдерах</h2>
<p>Нет никакого смысла использовать сервисы, фабрики, провайдеры, константы, потому что <a href="https://stepansuvorov.com/blog/2013/03/angularjs-%D1%87%D0%B5%D0%BC-%D0%BE%D1%82%D0%BB%D0%B8%D1%87%D0%B0%D0%B5%D1%82%D1%81%D1%8F-provider-factory-%D0%B8-service/">они делают одно и тоже</a>.</p>
<p>Просто используйте фабрики(factories) для всего:</p>
<pre>[javascript]
myapp.factory('foo', function() {
  return something;
});
[/javascript]</pre>
<p>И теперь вы можете задать <em>foo</em> как зависимость, и фабрика вернет функцию, константу, объект или что-то еще.</p>
<p>Это все что вам нужно знать, когда вы начинаете работать с сервисами.</p>
<h2>Забудьте о module.config</h2>
<p>Существует не так много строк кода, которые действительно должны быть помещены в секцию <strong>module.config</strong>. Как правило все настройки могут легко уместиться в секции <strong>module.run</strong>, и даже, собрав все воедино в run, должно получиться не много кода, потому что за исключением настроек роутера вся инициализация UI может быть выполнена внутри главной(top) директиве страницы.</p>
<p>Разработчики AngularJS зачем-то сделали отличие в использовании &#8216;<strong>provider</strong>&#8216; по сравнению с остальными сервисами(service, factory, config, value). Только провайдеры могут быть доступны на этапе конфигурации, <span style="text-decoration: underline;">и  только там</span>.</p>
<p>Мой совет: просто забудьте что существуют провайдеры и блоки конфигурации.</p>
<p>Исключением могут быть только встроенные сервисы AngularJS, которые можно настраивать только с помощью провайдеров, например <strong>$routeProvider</strong>.</p>
<h2>Будьте осторожны с использованием событий на scope</h2>
<p>Когда у вас есть 2 компонента, которые должны обмениваться данными, вы наверное думаете, что наиболее удобный способ реализовать &#8211; это будет генерировать события в одном элементе и считывать в другом (используя <strong>$scope.$emit</strong>/<strong>$broadcast</strong> и <strong>$scope.$on</strong>).</p>
<p id="106b" class="graf--p graf-after--p">Такой подход приводит к тому, что очень в скором времени вы окончательно запутаетесь в взаимосвязях между компонентами, а код будет крайне сложно отлаживать.</p>
<p class="graf--p graf-after--p">В общем случае, для данных задач лучше всего использовать коллбэки, определенные на компоненте, которые сравнительно легко отлаживать.</p>
<p id="e9c1" class="graf--p graf-after--p">Да, конечно, существуют, задачи, которые можно и нужно решать с помощью событий, например: когда вы переходите из одного стейта в другой и хотите показать индикатор загрузки, достаточно просто отправить событие &#8216;<em>loading</em>&#8216;. Но это скорее исключение.</p>
<h2 class="graf--p graf-after--p">Почувствуйте удобство работы с $exceptionHandler</h2>
<p class="graf--p graf-after--p">Это то место, где собираются все не отловленные ошибки вашего приложения. Angular оборачивает все котроллеры, сервисы, промисы и все остальное в блок try/catch и предоставляет глобальный обработчик исключительных ситуаций.</p>
<p class="graf--p graf-after--p">По умолчанию этот обработчик лишь выводит в консоль, но вы наверняка захотите предоставить пользователю вашего приложения страницу ошибки, или хотя бы какое-то сообщение в UI, вместе с регистрацией ошибки на сервере в базе.</p>
<h2 class="graf--p graf-after--p">Логирование ошибок на сервере</h2>
<p class="graf--p graf-after--p">Мы для себя сделали довольно простой буфер, что отправляет накопившиеся лог-сообщения по изменению стейта а также по временному интервалу. Это позволяет следить за всем, что происходит на стороне клиента, при этом не делая 100500 запросов.</p>
<p class="graf--p graf-after--p">Очень надеемся в скором времени выложить наш буфер в опен-сорс. Это крайне необходимый инструмент для анализа ошибок на стороне клиента в продакшене.</p>
<h2 id="7cdc" class="graf--p graf-after--p">Используйте ui-router</h2>
<p class="graf--p graf-after--p">У Angular есть свой роутер, но он предоставляет только базовую функциональность и работает исключительно с плоской структурой стейтов.</p>
<p class="graf--p graf-after--p">В свою очередь <strong>angular-ui-router</strong> позволяет делать неограниченное количество вложенных роутов. Наверняка вам уже приходилось делать что-то типа переключения между вложенными вью, так вот в ui-router это можно сделать из коробки. И так же важно, что все стейты хранятся в одном месте.</p>
<p class="graf--p graf-after--p">Например: в PayPal Checkout у нас такая структура:</p>
<ul>
<li class="graf--p graf-after--p">Корневой стейт
<ul>
<li class="graf--p graf-after--p">Просмотр оплаты
<ul>
<li class="graf--p graf-after--p">Сайдбар
<ul>
<li class="graf--p graf-after--p">
<h2></h2>
<p>Добавление новой кредитной карточки</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="graf--p graf-after--p">С использованием ui-router получится следующий url:</p>
<pre id="c0ad" class="graf--pre graf-after--p">#/checkout/review/sidebar/addcard</pre>
<p id="92ad" class="graf--h4 graf-after--p">и при перезагрузки страницы или возвращении назад на эту страницу мы всегда знаем где юзер должен находиться без потери фокуса.</p>
<h2>Будьте осторожны с промисами и обработкой ошибок</h2>
<p class="graf--p graf-after--p">Промисы используются практически везде в AngularJS, и вы сталкиваетесь с ними с первого же $http запроса. Однако, в некоторых случаях они ведут себя довольно коварно. В первую очередь это связано с тем, что нет единого потока выполнения и нет единого места обработки всех невыполненных промисов.  Рассмотрим такой пример:</p>
<pre>[javascript]
$http.get('/foo/bar').then(function(result) {
  console.log('Success!', result);
});
[/javascript]</pre>
<p class="graf--p graf-after--p"> в этом случае мы не перехватываем возможную ошибку. Важно не лениться всегда обрабатывать отмененные промисы:</p>
<pre>[javascript]
$http.get('/foo/bar').then(function(result) {
  console.log('Success!', result);
}).catch(function(err) {
  console.error(err.stack);
});
[/javascript]</pre>
<p class="graf--p graf-after--pre">Но на этом история не заканчивается. Обычно в случае появлении ошибки промис просто отменяется. Однако в AngularJS есть различие между отмененным промисом и ошибкой/исключением (thrown error). Если промис отменен, то есть возвращается <strong>$q.reject(err)</strong>, я могу легко отловить ошибку и обработать так, как я захочу с помощью catch(). А вот в случае исключительной ситуации, когда что-то кидает ошибку с помощью throw, то Angular ведет себя довольно неожиданно: да, промис отменяется, как и в стандартной ситуации, и вызывается метод catch(), но даже если есть catch() метод, то ошибка все равно будет отправлена в <strong>$exceptionHandler</strong>.</p>
<p class="graf--p graf-after--pre">То есть, если вы обрабатываете ошибки в обоих местах ($exceptionHandler и catch()), то получится так, что вы обработаете одну и ту же ошибку дважды.</p>
<p class="graf--p graf-after--pre">Чтобы уменьшить количество таких случаев, мы вам рекомендуем использовать  &#8220;throw&#8221; в асинхронных операциях <span style="text-decoration: underline;">только для случаев, которые нельзя обработать</span>. Для бизнес логики &#8211; только $q.reject().</p>
<h2 id="c3f8" class="graf--p graf-after--p">Постарайтесь избегать ленивой загрузки (lazy loading)</h2>
<p class="graf--p graf-after--p">Ангулар позволяет регистрировать модули (и соответственно все его составляющие: сервисы, директивы..) только на этапе инициализации приложения. Существуют различные решения, как это можно обойти. Но, поверьте, оно того не стоит.</p>
<p class="graf--p graf-after--p">Отложенная загрузка на уровне роутера, это то, с чем пришлось долго возиться, и в конце концов мы отказались от нее.</p>
<h2 class="graf--p graf-after--p">Будьте осторожны с циклом дайджеста(digest cycle)</h2>
<p class="graf--p graf-after--p">Я не буду вам рассказывать о производительности AngularJS, сказано уже достаточно. Но общее понимание принципов работы цикла дайджеста действительно важно, когда вы обновляете что-то в scope.</p>
<p class="graf--p graf-after--p">В общем случае: Ангуляр запускает дайджест, чтобы проверить что изменилось в объекте. А, так как объект не имеет своих наблюдателей (observers), то фремворку придется проходить весь объект.</p>
<p id="1557" class="graf--p graf-after--p">И это может привести к коварной ошибке, когда в $scope у вас есть метод, который каждый раз возвращает новый объект. Например:</p>
<pre>[javascript]
$scope.foo = function() {
  return {bar: 'baz'};
};
[/javascript]</pre>
<p class="graf--p graf-after--p">и Angular будет вызывать этот метод снова и снова, так как будет думать что скоуп каждый раз обновляется. И появится фатальная ошибка превышения допустимого рекурсивного количества вызовов дайджеста.</p>
<p class="graf--p graf-after--p">Лучше сделать так:</p>
<pre>[javascript]
var data = {bar: 'baz'};
$scope.foo = function() {
    return data;
};
[/javascript]</pre>
<p class="graf--p graf--first">Это вроде бы все. Соблюдение этих правил позволило нам создать относительно масштабируемое приложение с большим числом компонентов, которые могут использоваться в разных местах, и что так же немаловажно &#8211; мы используем единый подход к решению однотипных ситуаций.</p>
<p class="graf--p graf--first">Надеемся эти советы помогут вам минимизировать количество проблем связанных с расширением вашего AngularJS приложения.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://stepansuvorov.com/blog/2015/11/angularjs-%d1%81%d0%be%d0%b2%d0%b5%d1%82%d1%8b-%d0%be%d1%82-%d0%ba%d0%be%d0%bc%d0%b0%d0%bd%d0%b4%d1%8b-paypal/feed/</wfw:commentRss>
			<slash:comments>7</slash:comments>
		
		
			</item>
		<item>
		<title>AngularJS: Зачем котроллеру ngModel нужны $formatters и $parsers</title>
		<link>https://stepansuvorov.com/blog/2015/11/angularjs-%d0%b7%d0%b0%d1%87%d0%b5%d0%bc-%d0%ba%d0%be%d1%82%d1%80%d0%be%d0%bb%d0%bb%d0%b5%d1%80%d1%83-ngmodel-%d0%bd%d1%83%d0%b6%d0%bd%d1%8b-formatters-%d0%b8-parsers/</link>
					<comments>https://stepansuvorov.com/blog/2015/11/angularjs-%d0%b7%d0%b0%d1%87%d0%b5%d0%bc-%d0%ba%d0%be%d1%82%d1%80%d0%be%d0%bb%d0%bb%d0%b5%d1%80%d1%83-ngmodel-%d0%bd%d1%83%d0%b6%d0%bd%d1%8b-formatters-%d0%b8-parsers/#comments</comments>
		
		<dc:creator><![CDATA[Stepan]]></dc:creator>
		<pubDate>Wed, 04 Nov 2015 17:50:36 +0000</pubDate>
				<category><![CDATA[Хочу сделать мир лучше]]></category>
		<category><![CDATA[$formatters]]></category>
		<category><![CDATA[$parsers]]></category>
		<category><![CDATA[AngularJs]]></category>
		<category><![CDATA[ngModel]]></category>
		<guid isPermaLink="false">http://stepansuvorov.com/blog/?p=2893</guid>

					<description><![CDATA[Небольшая заметка о том, для чего нужны $formatters и $parsers в контроллере ngModel директивы и когда их можно применять. Вкратце: $formatters определяют как модель будет представлена во вью $parsers определяют как значения из вью будет записаны в модель Сразу же пример &#8230; <a href="https://stepansuvorov.com/blog/2015/11/angularjs-%d0%b7%d0%b0%d1%87%d0%b5%d0%bc-%d0%ba%d0%be%d1%82%d1%80%d0%be%d0%bb%d0%bb%d0%b5%d1%80%d1%83-ngmodel-%d0%bd%d1%83%d0%b6%d0%bd%d1%8b-formatters-%d0%b8-parsers/">Continue reading <span class="meta-nav">&#8594;</span></a>]]></description>
										<content:encoded><![CDATA[<p>Небольшая заметка о том, для чего нужны <strong>$formatters</strong> и <strong>$parsers</strong> в контроллере <strong>ngModel</strong> директивы и когда их можно применять.</p>
<p>Вкратце:</p>
<ul>
<li><strong>$formatters</strong> определяют как модель будет представлена во вью</li>
<li><strong>$parsers</strong> определяют как значения из вью будет записаны в модель</li>
</ul>
<p><span id="more-2893"></span></p>
<p>Сразу же пример кода:</p>
<p>[javascript]<br />
//model -&gt; view<br />
ngModel.$formatters.push(function(modelValue) {<br />
  return modelValue.toUpperCase();<br />
});</p>
<p>//view -&gt; model<br />
ngModel.$parsers.push(function(viewValue) {<br />
  return viewValue.toLowerCase();<br />
});<br />
[/javascript]</p>
<p>Полный пример кода <a href="http://plnkr.co/edit/ZmlGQtag494IYuorGsgS?p=preview">тут</a>.</p>
<p>Можете обратить внимание что при попытке задать модели через поле ввода оно всегда будет в нижнем регистре, и наоборот: при выводе значения модели в инпуте оно будет в верхнем регистре.</p>
<p>Кроме форматирования ввода/вывода мы можем использовать парсер-форматеры также для проверки данных:</p>
<p>[javascript]<br />
ngModel.$parsers.unshift(function checkForEven(viewValue){<br />
  if (parseInt(viewValue)%2 === 0) {<br />
    ngModel.$setValidity(&#8216;evenNumber&#8217;,true);<br />
  }<br />
  else{<br />
    ngModel.$setValidity(&#8216;evenNumber&#8217;, false);<br />
  }<br />
  return viewValue;<br />
});<br />
[/javascript]</p>
<p>в данном случае мы разрешаем использовать только четные числа.</p>
<p>Если нужно валидировать не только данные вводимые в инпут, но и данные передаваемые во вью из модели, то эту же проверку необходимо добавить и в форматеры. Оба случая можно посмотреть <a href="http://plnkr.co/edit/jwjHL4WWmbHEvHGrXIxG?p=preview">тут</a>.</p>
<p>Мы можем задавать как один парсер/форматер, так и не сколько, и они будут выполнены в порядке, в котором они указаны в массиве, именно поэтому, если вы хотите чтобы валидаторы выполнились первыми мы делаем не <strong>push()</strong>, а <strong>unshift()</strong>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://stepansuvorov.com/blog/2015/11/angularjs-%d0%b7%d0%b0%d1%87%d0%b5%d0%bc-%d0%ba%d0%be%d1%82%d1%80%d0%be%d0%bb%d0%bb%d0%b5%d1%80%d1%83-ngmodel-%d0%bd%d1%83%d0%b6%d0%bd%d1%8b-formatters-%d0%b8-parsers/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
			</item>
	</channel>
</rss>
