<!DOCTYPE html>
<!--[if IE 6]>
<html id="ie6" lang="en-US">
<![endif]-->
<!--[if IE 7]>
<html id="ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html id="ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 6) & !(IE 7) & !(IE 8)]><!-->
<html lang="en-US">
<!--<![endif]-->

<!-- Mirrored from stepansuvorov.com/blog/2014/12/angularjs-mistakes/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 11 Feb 2025 14:07:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<title>
Самые распространенные ошибки AngularJS разработчиков | Stepan Suvorov Blog	</title>
<link rel="profile" href="https://gmpg.org/xfn/11" />
<link rel="stylesheet" type="text/css" media="all" href="../../../wp-content/themes/twentyeleven/stylede5a.css?ver=20221126" />
<link rel="pingback" href="../../../xmlrpc.php">
<!--[if lt IE 9]>
<script src="https://stepansuvorov.com/blog/wp-content/themes/twentyeleven/js/html5.js?ver=3.7.0" type="text/javascript"></script>
<![endif]-->
<meta name='robots' content='max-image-preview:large' />
<link rel='dns-prefetch' href='http://www.googletagmanager.com/' />
<link rel='dns-prefetch' href='http://pagead2.googlesyndication.com/' />
<link rel="alternate" type="application/rss+xml" title="Stepan Suvorov Blog &raquo; Feed" href="../../../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Stepan Suvorov Blog &raquo; Comments Feed" href="../../../comments/feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Stepan Suvorov Blog &raquo; Самые распространенные ошибки AngularJS разработчиков Comments Feed" href="feed/index.html" />
<script type="text/javascript">
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/stepansuvorov.com\/blog\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.3.1"}};
/*! This file is auto-generated */
!function(i,n){var o,s,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),r=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===r[t]})}function u(e,t,n){switch(t){case"flag":return n(e,"\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f","\ud83c\udff3\ufe0f\u200b\u26a7\ufe0f")?!1:!n(e,"\ud83c\uddfa\ud83c\uddf3","\ud83c\uddfa\u200b\ud83c\uddf3")&&!n(e,"\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f","\ud83c\udff4\u200b\udb40\udc67\u200b\udb40\udc62\u200b\udb40\udc65\u200b\udb40\udc6e\u200b\udb40\udc67\u200b\udb40\udc7f");case"emoji":return!n(e,"\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c\udfff","\ud83e\udef1\ud83c\udffb\u200b\ud83e\udef2\ud83c\udfff")}return!1}function f(e,t,n){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):i.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0}),o=(a.textBaseline="top",a.font="600 32px Arial",{});return e.forEach(function(e){o[e]=t(a,e,n)}),o}function t(e){var t=i.createElement("script");t.src=e,t.defer=!0,i.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",s=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){i.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),p.toString()].join(",")+"));",r=new Blob([e],{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r),{name:"wpTestEmojiSupports"});return void(a.onmessage=function(e){c(n=e.data),a.terminate(),t(n)})}catch(e){}c(n=f(s,u,p))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);
</script>
<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 0.07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel='stylesheet' id='wp-block-library-css' href='../../../wp-includes/css/dist/block-library/style.min9b30.css?ver=6.3.1' type='text/css' media='all' />
<style id='wp-block-library-theme-inline-css' type='text/css'>
.wp-block-audio figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-audio figcaption{color:hsla(0,0%,100%,.65)}.wp-block-audio{margin:0 0 1em}.wp-block-code{border:1px solid #ccc;border-radius:4px;font-family:Menlo,Consolas,monaco,monospace;padding:.8em 1em}.wp-block-embed figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-embed figcaption{color:hsla(0,0%,100%,.65)}.wp-block-embed{margin:0 0 1em}.blocks-gallery-caption{color:#555;font-size:13px;text-align:center}.is-dark-theme .blocks-gallery-caption{color:hsla(0,0%,100%,.65)}.wp-block-image figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-image figcaption{color:hsla(0,0%,100%,.65)}.wp-block-image{margin:0 0 1em}.wp-block-pullquote{border-bottom:4px solid;border-top:4px solid;color:currentColor;margin-bottom:1.75em}.wp-block-pullquote cite,.wp-block-pullquote footer,.wp-block-pullquote__citation{color:currentColor;font-size:.8125em;font-style:normal;text-transform:uppercase}.wp-block-quote{border-left:.25em solid;margin:0 0 1.75em;padding-left:1em}.wp-block-quote cite,.wp-block-quote footer{color:currentColor;font-size:.8125em;font-style:normal;position:relative}.wp-block-quote.has-text-align-right{border-left:none;border-right:.25em solid;padding-left:0;padding-right:1em}.wp-block-quote.has-text-align-center{border:none;padding-left:0}.wp-block-quote.is-large,.wp-block-quote.is-style-large,.wp-block-quote.is-style-plain{border:none}.wp-block-search .wp-block-search__label{font-weight:700}.wp-block-search__button{border:1px solid #ccc;padding:.375em .625em}:where(.wp-block-group.has-background){padding:1.25em 2.375em}.wp-block-separator.has-css-opacity{opacity:.4}.wp-block-separator{border:none;border-bottom:2px solid;margin-left:auto;margin-right:auto}.wp-block-separator.has-alpha-channel-opacity{opacity:1}.wp-block-separator:not(.is-style-wide):not(.is-style-dots){width:100px}.wp-block-separator.has-background:not(.is-style-dots){border-bottom:none;height:1px}.wp-block-separator.has-background:not(.is-style-wide):not(.is-style-dots){height:2px}.wp-block-table{margin:0 0 1em}.wp-block-table td,.wp-block-table th{word-break:normal}.wp-block-table figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-table figcaption{color:hsla(0,0%,100%,.65)}.wp-block-video figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-video figcaption{color:hsla(0,0%,100%,.65)}.wp-block-video{margin:0 0 1em}.wp-block-template-part.has-background{margin-bottom:0;margin-top:0;padding:1.25em 2.375em}
</style>
<style id='kevinbatdorf-code-block-pro-style-inline-css' type='text/css'>
.wp-block-kevinbatdorf-code-block-pro{box-sizing:border-box!important;direction:ltr!important;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;position:relative!important}.wp-block-kevinbatdorf-code-block-pro *{box-sizing:border-box!important}.wp-block-kevinbatdorf-code-block-pro pre,.wp-block-kevinbatdorf-code-block-pro pre *{font-size:inherit!important;line-height:inherit!important}.wp-block-kevinbatdorf-code-block-pro:not(.code-block-pro-editor) pre{--tw-shadow:0 0 #0000!important;--tw-shadow-colored:0 0 #0000!important;background-image:none!important;border:0!important;border-radius:0!important;border-style:none!important;border-width:0!important;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)!important;color:inherit!important;font-family:inherit!important;margin:0!important;overflow:auto!important;overflow-wrap:normal!important;padding:16px 0 16px 16px!important;text-align:left!important;white-space:pre!important}.wp-block-kevinbatdorf-code-block-pro.padding-disabled:not(.code-block-pro-editor) pre{padding:0!important}.wp-block-kevinbatdorf-code-block-pro.padding-bottom-disabled pre{padding-bottom:0!important}.wp-block-kevinbatdorf-code-block-pro:not(.code-block-pro-editor) pre code{--tw-shadow:0 0 #0000!important;--tw-shadow-colored:0 0 #0000!important;background:none!important;background-color:transparent!important;border:0!important;border-radius:0!important;border-style:none!important;border-width:0!important;box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)!important;color:inherit!important;display:block!important;font-family:inherit!important;margin:0!important;overflow-wrap:normal!important;padding:0!important;text-align:left!important;white-space:pre!important;width:100%!important}.wp-block-kevinbatdorf-code-block-pro:not(.code-block-pro-editor) pre code .line{display:inline-block!important;min-width:var(--cbp-block-width,100%)!important;vertical-align:top!important}.wp-block-kevinbatdorf-code-block-pro.cbp-has-line-numbers:not(.code-block-pro-editor) pre code .line{padding-left:calc(12px + var(--cbp-line-number-width, auto))!important}.wp-block-kevinbatdorf-code-block-pro.cbp-has-line-numbers:not(.code-block-pro-editor) pre code{counter-increment:step calc(var(--cbp-line-number-start, 1) - 1)!important;counter-reset:step!important}.wp-block-kevinbatdorf-code-block-pro pre code .line{position:relative!important}.wp-block-kevinbatdorf-code-block-pro:not(.code-block-pro-editor) pre code .line:before{content:""!important;display:inline-block!important}.wp-block-kevinbatdorf-code-block-pro.cbp-has-line-numbers:not(.code-block-pro-editor) pre code .line:not(.cbp-line-number-disabled):before{color:var(--cbp-line-number-color,#999)!important;content:counter(step)!important;counter-increment:step!important;left:0!important;opacity:.5!important;position:absolute!important;text-align:right!important;transition-duration:.5s!important;transition-property:opacity!important;transition-timing-function:cubic-bezier(.4,0,.2,1)!important;-webkit-user-select:none!important;-moz-user-select:none!important;user-select:none!important;width:var(--cbp-line-number-width,auto)!important}.wp-block-kevinbatdorf-code-block-pro.cbp-highlight-hover .line{min-height:var(--cbp-block-height,100%)!important}.wp-block-kevinbatdorf-code-block-pro .line.cbp-line-highlight .cbp-line-highlighter,.wp-block-kevinbatdorf-code-block-pro .line.cbp-no-blur:hover .cbp-line-highlighter,.wp-block-kevinbatdorf-code-block-pro.cbp-highlight-hover:not(.cbp-blur-enabled:not(.cbp-unblur-on-hover)) .line:hover .cbp-line-highlighter{background:var(--cbp-line-highlight-color,rgb(14 165 233/.2))!important;left:-16px!important;min-height:var(--cbp-block-height,100%)!important;min-width:calc(var(--cbp-block-width, 100%) + 16px)!important;pointer-events:none!important;position:absolute!important;top:0!important;width:100%!important}[data-code-block-pro-font-family="Code-Pro-Comic-Mono.ttf"].wp-block-kevinbatdorf-code-block-pro .line.cbp-line-highlight .cbp-line-highlighter,[data-code-block-pro-font-family="Code-Pro-Comic-Mono.ttf"].wp-block-kevinbatdorf-code-block-pro .line.cbp-no-blur:hover .cbp-line-highlighter,[data-code-block-pro-font-family="Code-Pro-Comic-Mono.ttf"].wp-block-kevinbatdorf-code-block-pro.cbp-highlight-hover:not(.cbp-blur-enabled:not(.cbp-unblur-on-hover)) .line:hover .cbp-line-highlighter{top:-.125rem!important}[data-code-block-pro-font-family=Code-Pro-Fira-Code].wp-block-kevinbatdorf-code-block-pro .line.cbp-line-highlight .cbp-line-highlighter,[data-code-block-pro-font-family=Code-Pro-Fira-Code].wp-block-kevinbatdorf-code-block-pro .line.cbp-no-blur:hover .cbp-line-highlighter,[data-code-block-pro-font-family=Code-Pro-Fira-Code].wp-block-kevinbatdorf-code-block-pro.cbp-highlight-hover:not(.cbp-blur-enabled:not(.cbp-unblur-on-hover)) .line:hover .cbp-line-highlighter{top:-1.5px!important}.wp-block-kevinbatdorf-code-block-pro:not(.code-block-pro-editor).padding-disabled pre .line.cbp-line-highlight:after{left:0!important;width:100%!important}.wp-block-kevinbatdorf-code-block-pro.cbp-blur-enabled pre .line:not(.cbp-no-blur){filter:blur(1px)!important;opacity:.4!important;pointer-events:none!important;transition-duration:.2s!important;transition-property:all!important;transition-timing-function:cubic-bezier(.4,0,.2,1)!important}.wp-block-kevinbatdorf-code-block-pro.cbp-blur-enabled.cbp-unblur-on-hover:hover pre .line:not(.cbp-no-blur){--tw-blur:blur(0)!important;filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)!important;opacity:1!important;pointer-events:auto!important}.wp-block-kevinbatdorf-code-block-pro:not(.code-block-pro-editor) pre *{font-family:inherit!important}.cbp-see-more-simple-btn-hover{transition-property:none!important}.cbp-see-more-simple-btn-hover:hover{box-shadow:inset 0 0 100px 100px hsla(0,0%,100%,.1)!important}.code-block-pro-copy-button{background:none!important;background-color:transparent!important;border:0!important;border-style:none!important;border-width:0!important;cursor:pointer!important;left:auto!important;line-height:1!important;opacity:.1!important;padding:6px!important;position:absolute!important;right:0!important;top:0!important;transition-duration:.2s!important;transition-property:opacity!important;transition-timing-function:cubic-bezier(.4,0,.2,1)!important;z-index:10!important}.code-block-pro-copy-button:focus{opacity:.4!important}.wp-block-kevinbatdorf-code-block-pro.padding-disabled .code-block-pro-copy-button{padding:0!important}.wp-block-kevinbatdorf-code-block-pro:hover .code-block-pro-copy-button{opacity:.5!important}.wp-block-kevinbatdorf-code-block-pro .code-block-pro-copy-button:hover{opacity:.9!important}.code-block-pro-copy-button .without-check{display:block!important}.code-block-pro-copy-button .with-check,.code-block-pro-copy-button.cbp-copying .without-check{display:none!important}.code-block-pro-copy-button.cbp-copying .with-check{display:block!important}.cbp-footer-link:hover{text-decoration-line:underline!important}

</style>
<style id='classic-theme-styles-inline-css' type='text/css'>
/*! This file is auto-generated */
.wp-block-button__link{color:#fff;background-color:#32373c;border-radius:9999px;box-shadow:none;text-decoration:none;padding:calc(.667em + 2px) calc(1.333em + 2px);font-size:1.125em}.wp-block-file__button{background:#32373c;color:#fff;text-decoration:none}
</style>
<style id='global-styles-inline-css' type='text/css'>
body{--wp--preset--color--black: #000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #fff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--color--blue: #1982d1;--wp--preset--color--dark-gray: #373737;--wp--preset--color--medium-gray: #666;--wp--preset--color--light-gray: #e2e2e2;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}:where(.is-layout-grid){gap: 0.5em;}body .is-layout-flow > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-flow > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-flow > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-constrained > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-constrained > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width: var(--wp--style--global--content-size);margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignwide{max-width: var(--wp--style--global--wide-size);}body .is-layout-flex{display: flex;}body .is-layout-flex{flex-wrap: wrap;align-items: center;}body .is-layout-flex > *{margin: 0;}body .is-layout-grid{display: grid;}body .is-layout-grid > *{margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
.wp-block-navigation a:where(:not(.wp-element-button)){color: inherit;}
:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}
.wp-block-pullquote{font-size: 1.5em;line-height: 1.6;}
</style>
<link rel='stylesheet' id='wprc-style-css' href='../../../wp-content/plugins/report-content/static/css/styles9b30.css?ver=6.3.1' type='text/css' media='all' />
<link rel='stylesheet' id='twentyeleven-block-style-css' href='../../../wp-content/themes/twentyeleven/blocks03d3.css?ver=20230122' type='text/css' media='all' />
<script type='text/javascript' src='../../../wp-includes/js/jquery/jquery.min3088.js?ver=3.7.0' id='jquery-core-js'></script>
<script type='text/javascript' src='../../../wp-includes/js/jquery/jquery-migrate.min5589.js?ver=3.4.1' id='jquery-migrate-js'></script>
<script type='text/javascript' id='wprc-script-js-extra'>
/* <![CDATA[ */
var wprcajaxhandler = {"ajaxurl":"https:\/\/stepansuvorov.com\/blog\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/plugins/report-content/static/js/scripts9b30.js?ver=6.3.1' id='wprc-script-js'></script>

<!-- Google Analytics snippet added by Site Kit -->
<script type='text/javascript' src='https://www.googletagmanager.com/gtag/js?id=GT-5NXW8XZ' id='google_gtagjs-js' async></script>
<script id="google_gtagjs-js-after" type="text/javascript">
window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}
gtag('set', 'linker', {"domains":["stepansuvorov.com"]} );
gtag("js", new Date());
gtag("set", "developer_id.dZTNiMT", true);
gtag("config", "GT-5NXW8XZ");
</script>

<!-- End Google Analytics snippet added by Site Kit -->
<link rel="https://api.w.org/" href="../../../wp-json/index.html" /><link rel="alternate" type="application/json" href="../../../wp-json/wp/v2/posts/2060.json" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../xmlrpc0db0.php?rsd" />
<meta name="generator" content="WordPress 6.3.1" />
<link rel="canonical" href="index.html" />
<link rel='shortlink' href='../../../index27d5.html?p=2060' />
<link rel="alternate" type="application/json+oembed" href="../../../wp-json/oembed/1.0/embed719c.json?url=https%3A%2F%2Fstepansuvorov.com%2Fblog%2F2014%2F12%2Fangularjs-mistakes%2F" />
<link rel="alternate" type="text/xml+oembed" href="../../../wp-json/oembed/1.0/embedc816?url=https%3A%2F%2Fstepansuvorov.com%2Fblog%2F2014%2F12%2Fangularjs-mistakes%2F&amp;format=xml" />
<meta name="generator" content="Site Kit by Google 1.110.0" /><meta name="google-site-verification" content="xt946WTH7xxkpeWcqzwQ1xmLLmr91UbOF6VSIl7m5rk">
<!-- Google AdSense snippet added by Site Kit -->
<meta name="google-adsense-platform-account" content="ca-host-pub-2644536267352236">
<meta name="google-adsense-platform-domain" content="sitekit.withgoogle.com">
<!-- End Google AdSense snippet added by Site Kit -->

<!-- Google AdSense snippet added by Site Kit -->
<script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2931348686023542&amp;host=ca-host-pub-2644536267352236" crossorigin="anonymous" type="text/javascript"></script>

<!-- End Google AdSense snippet added by Site Kit -->
</head>

<body class="post-template-default single single-post postid-2060 single-format-standard wp-embed-responsive single-author singular two-column right-sidebar">
<div class="skip-link"><a class="assistive-text" href="#content">Skip to primary content</a></div><div id="page" class="hfeed">
	<header id="branding">
			<hgroup>
				<h1 id="site-title"><span><a href="../../../index.html" rel="home">Stepan Suvorov Blog</a></span></h1>
				<h2 id="site-description">Release 2.0</h2>
			</hgroup>

						<a href="../../../index.html">
									<img src="../../../wp-content/uploads/2012/02/cropped-IMG_0523.jpg" width="1000" height="288" alt="Stepan Suvorov Blog" />
								</a>
			
									<form method="get" id="searchform" action="https://stepansuvorov.com/blog/">
		<label for="s" class="assistive-text">Search</label>
		<input type="text" class="field" name="s" id="s" placeholder="Search" />
		<input type="submit" class="submit" name="submit" id="searchsubmit" value="Search" />
	</form>
			
			<nav id="access">
				<h3 class="assistive-text">Main menu</h3>
				<div class="menu-menu-1-container"><ul id="menu-menu-1" class="menu"><li id="menu-item-3600" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-3600"><a href="../../../index.html">Home</a></li>
<li id="menu-item-3602" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3602"><a href="../../../useful-linux-comands/index.html">shell tricks</a></li>
<li id="menu-item-3603" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3603"><a href="../../../subscribe/index.html">Subscribe</a></li>
<li id="menu-item-3604" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3604"><a href="../../../i-use/index.html">I use</a></li>
<li id="menu-item-3606" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3606"><a href="https://stepansuvorov.com/">me</a></li>
</ul></div>			</nav><!-- #access -->
	</header><!-- #branding -->


	<div id="main">

		<div id="primary">
			<div id="content" role="main">

				
					<nav id="nav-single">
						<h3 class="assistive-text">Post navigation</h3>
						<span class="nav-previous"><a href="../angular-im/index.html" rel="prev"><span class="meta-nav">&larr;</span> Previous</a></span>
						<span class="nav-next"><a href="../regulex-%d1%81%d0%b5%d1%80%d0%b2%d0%b8%d1%81-%d0%b2%d0%b8%d0%b7%d1%83%d0%b0%d0%bb%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d0%b8-%d1%80%d0%b5%d0%b3%d1%83%d0%bb%d1%8f%d1%80%d0%bd%d1%8b%d1%85-%d0%b2%d1%8b%d1%80/index.html" rel="next">Next <span class="meta-nav">&rarr;</span></a></span>
					</nav><!-- #nav-single -->

					
<article id="post-2060" class="post-2060 post type-post status-publish format-standard hentry category-4 tag-angularjs tag-javascript">
	<header class="entry-header">
		<h1 class="entry-title">Самые распространенные ошибки AngularJS разработчиков</h1>

				<div class="entry-meta">
			<span class="sep">Posted on </span><a href="index.html" title="21:50" rel="bookmark"><time class="entry-date" datetime="2014-12-08T21:50:45+02:00">08.12.14</time></a><span class="by-author"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="../../../author/admin/index.html" title="View all posts by Stepan" rel="author">Stepan</a></span></span>		</div><!-- .entry-meta -->
			</header><!-- .entry-header -->

	<div class="entry-content">
		<p>Пост представляет собой микс перевода/переработки статьи <a href="https://www.airpair.com/angularjs/posts/top-10-mistakes-angularjs-developers-make">The Top 10 Mistakes AngularJS Developers Make</a> и личного <a title="хорошая иллюстрация" href="http://keddr.com/wp-content/uploads/2014/04/2830180.gif">грабельного опыта</a>.</p>
<h2><span id="more-2060"></span>Введение</h2>
<p>Думаю многие согласятся, что AngularJS один из самых популярных JavaScript фреймворков на сегодняшний день. Что делает его таким популярным? Наверное то, что он серьезно упрощает процесс разработки прототипов, и также позволяет расширять эти прототипы до полноценных многофункциональных приложений. Широкое распространение фрейворка привело в свою очередь к широкому распространению ошибок связанных с ним. Ниже приведен список самых часто встречаемых ошибок.</p>
<h2>1. &#8220;MVC&#8221; структура директорий проекта</h2>
<p>AngularJS &#8211; грубо говоря MVC фреймворк: модели не так четко выделены как в Backbone, но архитектурный паттерн все же похож. Когда мы работаем в рамках MVC фремфорка, общая практика &#8211; группировать файлы основываясь на их типе, то есть:</p>
<p><img decoding="async" fetchpriority="high" class="alignnone size-full wp-image-2106" title="mvc structure" src="../../../wp-content/uploads/2014/11/Screenshot-2014-11-17-14.48.23.png" alt="" width="280" height="276" /></p>
<p>Это выглядит как очевидный лэйаут, особенно если вы пришли откуда-то из Rails. Однако, как только приложение начинает расти, такое расположение приводит к тому, что много папок открыто одновременно. Чтобы бы вы не использовали Sublime, Visual Studio или Web Storm, много времени уходит на прокручивание дерева ресурсов. Вместо этого можно группировать файлы основываясь на фиче/модуле/предназначении:</p>
<p><img decoding="async" class="alignnone size-full wp-image-2107" title="good modular angularjs folder strcture" src="../../../wp-content/uploads/2014/11/Screenshot-2014-11-17-14.53.23.png" alt="" width="230" height="229" srcset="https://stepansuvorov.com/blog/wp-content/uploads/2014/11/Screenshot-2014-11-17-14.53.23.png 230w, https://stepansuvorov.com/blog/wp-content/uploads/2014/11/Screenshot-2014-11-17-14.53.23-150x150.png 150w" sizes="(max-width: 230px) 100vw, 230px" /></p>
<p>Такая структура директорий делает поиск конкретного файла намного проще и соотвественно ускоряет разработку. В итоге для нашего проекта мы пришли к <a title="Структура нашего AngularJS проекта" href="../../../2013/11/%d1%81%d1%82%d1%80%d1%83%d0%ba%d1%82%d1%83%d1%80%d0%b0-%d0%bd%d0%b0%d1%88%d0%b5%d0%b3%d0%be-angularjs-%d0%bf%d1%80%d0%be%d0%b5%d0%ba%d1%82%d0%b0/index.html">вот такой</a>модульной структуре.</p>
<h2>2. Модули (а точнее &#8211; их нехватка)</h2>
<p>Обычно, когда вы начинаете делать прототип, вы все складываете в главный модуль, иногда даже просто в один файл, и это работает:</p>
<p>[javascript]<br />
var app = angular.module(&#8216;app&#8217;,[]);</p>
<p>app.service(&#8216;MyService&#8217;, function(){<br />
  //service code<br />
});</p>
<p>app.controller(&#8216;MyCtrl&#8217;, function($scope, MyService){<br />
  //controller code<br />
});<br />
[/javascript]</p>
<p id="2-modules-or-lack-thereof-">В процессе разрастания приложения вы стараетесь уже группировать сущности с использованием модулей:</p>
<p>[javascript]<br />
var services = angular.module(&#8216;services&#8217;,[]);<br />
services.service(&#8216;MyService&#8217;, function(){<br />
  //service code<br />
});</p>
<p>var controllers = angular.module(&#8216;controllers&#8217;,[&#8216;services&#8217;]);<br />
controllers.controller(&#8216;MyCtrl&#8217;, function($scope, MyService){<br />
  //controller code<br />
});</p>
<p>var app = angular.module(&#8216;app&#8217;,[&#8216;controllers&#8217;, &#8216;services&#8217;]);<br />
[/javascript]</p>
<p>Как вы уже наверное обратили внимание: ошибка полностью аналогична ошибке с директориями. И правильным решением будет группировка по функциональному предназначению:</p>
<p>[javascript]<br />
var sharedServicesModule = angular.module(&#8216;sharedServices&#8217;,[]);<br />
sharedServices.service(&#8216;NetworkService&#8217;, function($http){});<br />
var loginModule = angular.module(&#8216;login&#8217;,[&#8216;sharedServices&#8217;]);<br />
loginModule.service(&#8216;loginService&#8217;, function(NetworkService){});<br />
loginModule.controller(&#8216;loginCtrl&#8217;, function($scope, loginService){});</p>
<p>var app = angular.module(&#8216;app&#8217;, [&#8216;sharedServices&#8217;, &#8216;login&#8217;]);<br />
[/javascript]</p>
<p>и конечно, в большом приложении все это должно быть разнесено по отдельным файлам.</p>
<h2>3. Внедрение зависимостей (Dependency injection)</h2>
<p>Dependency injection &#8211; один из лучших паттернов AngularJs. Он делает тестирование намного проще, на ряду с тем, что все зависимости становятся более понятно описаны. AngularJS очень гибок в плане того, как могут быть внедрены зависимоcти. Самый легкий способ: просто передать имя зависимости в функцию как параметр:</p>
<p>[javascript]<br />
app.controller(&#8216;MainCtrl&#8217;, function($scope, $timeout){<br />
  $timeout(function(){ console.log($scope); }, 1000);<br />
});<br />
[/javascript]</p>
<p>&#8211; вполне понятно, что <strong>MainCtrl</strong> зависит от <strong>$scope</strong> и <strong>$timeout</strong>. Это прекрасно работает до момента, когда вы захотите минифицировать код. Он может превратиться в что-то такое:</p>
<p>[javascript]<br />
var app=angular.module(&quot;app&quot;,[]);app.controller(&quot;MainCtrl&quot;,function(e,t){t(function(){console.log(e)},1e3)})<br />
[/javascript]</p>
<p>После такой компиляции AngularJS уже не знает какие там были зависимости у <strong>MainCtrl</strong>. AngularJS предлагает довольно простое решение для данной проблемы: передавать зависимости как массив строк, а последним элементом в этом массиве будет функция принимающая эти параметры:</p>
<p>[javascript]<br />
app.controller(&#8216;MainCtrl&#8217;, [&#8216;$scope&#8217;, &#8216;$timeout&#8217;, function($scope, $timeout){<br />
 $timeout(function(){ console.log($scope); }, 1000);<br />
}]);&lt;br /&gt;[/javascript]</p>
<p>в данном случае после компиляции получим:</p>
<p>[javascript]<br />
app.controller(&quot;MainCtrl&quot;,[&quot;$scope&quot;,&quot;$timeout&quot;,function(e,t){t(function(){console.log(e)},1e3)}])<br />
[/javascript]</p>
<p>Так же эту проблему можно решить с помощью <a title="github.com" href="https://github.com/olov/ng-annotate">ngAnnotate</a> модуля, который сам переведет ваш код в полную форму записи перед минификацией.</p>
<h2>3.1 Глобальные зависимости</h2>
<p>Часто при разработке на <strong>AngularJS</strong> возникает необходимость использования сторонних библиотек, которые в большей части представляют из себя глобальные объекты/функции (то есть доступны в любом месте кода). То, что мы можем их везде использовать не задумываясь о подключении, &#8211; это хорошо, но ломает паттерн ангуляра и ведет к ряду неприятных последствий при тестировании(и не только). AngularJS позволяет легко завернуть эти глобальные переменные в модули/сервисы и потом их подключать.</p>
<p>Например библиотека <a href="http://underscorejs.org/">Underscore.js</a>, которая существенно упрощает JavaScript код, может быть обернута в модуль/сервис следующим образом:</p>
<p>[javascript]<br />
var underscore = angular.module(&#8216;underscore&#8217;, []);<br />
underscore.factory(&#8216;_&#8217;, function($window) {<br />
    return $window._;  });<br />
var app = angular.module(&#8216;app&#8217;, [&#8216;underscore&#8217;]);<br />
app.controller(&#8216;MainCtrl&#8217;, [&#8216;$scope&#8217;, &#8216;_&#8217;, function($scope, _) {<br />
    init = function() {<br />
       _.keys($scope);<br />
    }<br />
    init();<br />
}]);<br />
[/javascript]</p>
<p id="3-1-global-dependencies">Это позволит сохранить структуру зависимостей AngularJS, и в дальнейшем мы сможем выгрузить(либо перегрузить) Underscore.js для тестов.</p>
<p>Может показаться, что это лишняя и ненужная работа, но если вы следуете &#8220;use strict&#8221; для всего вашего кода &#8211; данные изменения будут необходимы.</p>
<h2>4. Толстые котроллеры</h2>
<p>Контроллеры &#8211; это стержень AngularJS приложения. Когда вы только начали работать с фреймворком, есть большое желание свалить всю логику туда. Но запомните: <span style="text-decoration: underline;">в контроллерах не должно быть манипуляций с DOM структурой</span> &#8211; это то, что решается с помощью директив. Вся бизнес логика должна быть отдельно от котроллеров, а именно &#8211; в сервисах.</p>
<p><span style="text-decoration: underline;">Данные также должны храниться в сервисах</span> (за исключением тех случаев, когда это временные данных представления завязанные на <strong>$scope</strong>). Сервисы являются синглтонами и сохраняют свое значение на протяжении всей работы с приложением, а вот контроллеры могут перегружаться при изменении состояния. Если данные сохранены в контроллере, тогда они будут загружаться каждый раз при перезагрузке контроллера. Даже, если данные сохранены локально (например в <strong>localStorage</strong>), намного быстрее получить данные из JavaScript переменной.</p>
<h2>5. service или factory</h2>
<p>Наличие в фреймворке одновременно <strong>service</strong> и <strong>factory</strong> может сбить с толку начинающих разработчиков. Но все должно стать на свои места, когда вы поймете, что это всего лишь <a title="чем отличается provider, factory и service" href="../../../2013/03/angularjs-%d1%87%d0%b5%d0%bc-%d0%be%d1%82%d0%bb%d0%b8%d1%87%d0%b0%d0%b5%d1%82%d1%81%d1%8f-provider-factory-%d0%b8-service/index.html">синтаксический сахар для провайдеров</a>.</p>
<p>Так чем же все таки они отличаются? Суть скрывается в методе <strong>$injector.instantiate</strong>, благодаря которому инжектор создает новую сущность сервиса используя его функцию-конструктор.</p>
<p>Вот пример использования <strong>service</strong> и <strong>factory</strong>, которые делают одно и тоже:</p>
<p>[javascript]<br />
var app = angular.module(&#8216;app&#8217;,[]);<br />
app.service(&#8216;helloWorldService&#8217;, function(){<br />
    this.hello = function() {<br />
        return &quot;Hello World&quot;;<br />
    };<br />
});</p>
<p>app.factory(&#8216;helloWorldFactory&#8217;, function(){<br />
    return {<br />
        hello: function() {<br />
            return &quot;Hello World&quot;;<br />
        }<br />
    }<br />
});<br />
[/javascript]</p>
<p>При внедрении сущностей в обоих случаях мы получим в контроллере сущность, которая будет содержать метод <em>hello</em>(). Функция-конструктор для сервиса будет инициализирована один раз при объявлении, в том время как объект фабрики создается каждый раз при инжекте. Да, конечно, мы можем реализовать <strong>service</strong> так, что он будет вести себя как <strong>factory</strong>.</p>
<p>Так зачем нужны 2 способа? factory предполагает более гибкую настройку, чем service, потому что она может вернуть функцию-конструктор, которая будет использована для создания объекта (из <a title="Абстрактная фабрика" href="https://ru.wikipedia.org/wiki/Абстрактная_фабрика_(шаблон_проектирования)">этого паттерна</a> вероятно и происходит название сущности).</p>
<p>[javascript]<br />
app.factory(&#8216;helloFactory&#8217;, function() {<br />
    return function(name) {<br />
        this.name = name;<br />
        this.hello = function() {<br />
            return &quot;Hello &quot; + this.name;<br />
        };<br />
    };<br />
});<br />
[/javascript]</p>
<p>Вот пример использования такой фабрики в контроллере:</p>
<p>[javascript]<br />
app.controller(&#8216;helloCtrl&#8217;, function($scope, helloWorldService, helloWorldFactory, helloFactory) {</p>
<p>    helloWorldService.hello(); //&#8217;Hello World&#8217;<br />
    helloWorldFactory.hello(); //&#8217;Hello World&#8217;<br />
    new helloFactory(&#8216;Readers&#8217;).hello() //&#8217;Hello Readers&#8217;<br />
});<br />
[/javascript]</p>
<p>Другими словами: когда начинаете разрабатывать приложения на основе <strong>AngularJS</strong> и вам не нужен паттерн &#8220;фабрика&#8221;, то <span style="text-decoration: underline;">просто используйте service</span>.</p>
<p>Фабрика может пригодиться там, где у нас много приватных методов:</p>
<p>[javascript]<br />
app.factory(&#8216;privateFactory&#8217;, function(){<br />
    var privateFunc = function(name) {<br />
        return name.split(&quot;&quot;).reverse().join(&quot;&quot;); //reverses the name<br />
    };</p>
<p>    return {<br />
        hello: function(name){<br />
            return &quot;Hello &quot; + privateFunc(name); }<br />
    };<br />
});<br />
[/javascript]</p>
<p>этот пример иллюстрирует возможность наличия <em>privateFunc</em> метода не доступного извне. Данный паттерн можно создать и с использованием сервисов, но фабрика делает его более очевидным.</p>
<h2>6. Игнорирование инструментов Batarang и ng-inspector</h2>
<p><strong><a title="chrome.google.com/webstore" href="https://chrome.google.com/webstore/detail/angularjs-batarang/ighdmehidhipcmcojjgiloacoafjmpfk?hl=en">Batarang</a></strong> &#8211; расширение для Chrome браузера. Более подробно в <a title="AngularJs Batarang" href="../../../2013/07/angularjs-batarang/index.html">этом</a> посте.</p>
<p><img decoding="async" title="angular-batarang" src="../../../wp-content/uploads/2014/11/angular-batarang-300x186.png" alt="" width="300" height="186" /></p>
<p>Основные возможности:</p>
<ul>
<li>просмотр модели <strong>scope</strong> (может быть полезно при работе с изолированным <strong>scope</strong>)</li>
<li>граф зависимостей (например: для выявления перегруженных сущностей)</li>
<li>аналитика производительности (для определения наиболее ресурсоемких операций)</li>
</ul>
<p><strong><a href="http://ng-inspector.org/">ng-inspector</a></strong> &#8211; еще одно полезное расширение для Chrome (так же существует для Safari). Предоставляет удобный обзор структуры scope (что в Batarang сделано не самым лучшим образом).</p>
<p><img decoding="async" loading="lazy" class="alignnone size-medium wp-image-2115" title="ng-inspector" src="../../../wp-content/uploads/2014/11/ng-inspector-300x180.png" alt="" width="300" height="180" srcset="https://stepansuvorov.com/blog/wp-content/uploads/2014/11/ng-inspector-300x180.png 300w, https://stepansuvorov.com/blog/wp-content/uploads/2014/11/ng-inspector-500x300.png 500w, https://stepansuvorov.com/blog/wp-content/uploads/2014/11/ng-inspector.png 866w" sizes="(max-width: 300px) 100vw, 300px" /></p>
<h2 id="6-not-utilizing-batarang"></h2>
<h2>7. Слишком много вотчеров</h2>
<p>Как было отмечено в предыдущем пункте: AngularJS довольно производительный уже &#8220;из коробки&#8221;. Но когда число вотчеров превысит 2000, это может стать реальной проблемой. (Это собираются пофиксить в AngularJS 1.3, более подробно можно почитать <a title="Delaying the $digest() cycle in Angularjs" href="http://www.aaron-gray.com/delaying-the-digest-cycle-in-angularjs/">тут</a>)</p>
<p>Вот этот код покажет количество вотчеров на странице(можно быстро проверить в консоли):</p>
<p>[javascript]<br />
(function () {<br />
  var root = $(document.getElementsByTagName(&#8216;body&#8217;));<br />
  var watchers = [];<br />
  var f = function (element) {<br />
    if (element.data().hasOwnProperty(&#8216;$scope&#8217;)) {<br />
      angular.forEach(element.data().$scope.$$watchers, function (watcher) {<br />
        watchers.push(watcher);<br />
      });<br />
    }</p>
<p>    angular.forEach(element.children(), function (childElement) {<br />
      f($(childElement));<br />
    });<br />
  };</p>
<p>  f(root);<br />
  console.log(watchers.length);</p>
<p>})();<br />
[/javascript]</p>
<p>Старайтесь выявлять места, где можно обойтись без дополнительных вотчеров. Помочь в этом может Batarang. Для тех случаев, когда нам не нужно двойное связывание, а необходимо просто вывести информацию в темплейт, можно использовать вспомогательный модуль <a href="https://github.com/Pasvaz/bindonce">bindonce</a>, который предоставляет специальные директивы &#8211; аналог ангуляровским, только без вотчеров.</p>
<h2>8. Путаница с наследованием $scope</h2>
<p>Есть некоторые нюансы <strong>прототипного наследования</strong> (используемого в javascript), которые проявляются при работе со <strong>$scope</strong>, так как каждый <strong>$scope</strong> наследуется от родительского <strong>$scope</strong> и так далее до самого верхнего уровня <strong>$rootScope</strong>.</p>
<p>Благодаря прототипному наследованию передача данных из родительского скоупа в дочерний довольно проста, но тут есть далеко не очевидный момент. Допустим у нас есть <em>username</em> отображаемый в панели навигации и он так же вводиться в форму логина, вот как это может быть реализовано:</p>
<p>[html]<br />
&lt;div ng-controller=&quot;navCtrl&quot;&gt;<br />
  &lt;span&gt;{{user}}&lt;/span&gt;<br />
  &lt;div ng-controller=&quot;loginCtrl&quot;&gt;<br />
    &lt;span&gt;{{user}}&lt;/span&gt;<br />
    &lt;input ng-model=&quot;user&quot;/&gt;<br />
   &lt;/div&gt;<br />
&lt;/div&gt;<br />
[/html]</p>
<p>!Внимание вопрос: какие поля шаблона обновятся (когда юзер вводит текст)?</p>
<p>Если вы сразу же ответили &#8220;<em>только loginCtrl</em>&#8220;, вероятно вы уже понимаете логику наследования. Поиграться с примером можно <a title="jsfiddle" href="http://jsfiddle.net/STEVER/nu11ejnw">тут</a>.</p>
<p>Суть в том, что <span style="text-decoration: underline;">примитивы передаются как значение</span>, а <span style="text-decoration: underline;">объекты по ссылке</span>. Поэтому, если мы хотим, чтобы обновилось также значение в котроллере navCtrl, то мы должны оперировать не значениями, а свойствами объектов, то есть вместо <strong>user</strong> мы запишем <strong>user.name</strong>:</p>
<p>[html]<br />
&lt;div ng-controller=&quot;navCtrl&quot;&gt;<br />
  &lt;span&gt;{{user.name}}&lt;/span&gt;<br />
  &lt;div ng-controller=&quot;loginCtrl&quot;&gt;<br />
    &lt;span&gt;{{user.name}}&lt;/span&gt;<br />
    &lt;input ng-model=&quot;user.name&quot;/&gt;<br />
  &lt;/div&gt;<br />
&lt;/div&gt;<br />
[/html]</p>
<p>Пример <a title="jsfiddle.net" href="http://jsfiddle.net/STEVER/6kf3ch6d/">тут</a>.</p>
<p>Может показаться, что пример надуман. Но это не так: даже, когда мы работаем с родными ангуляровами директивами, которые имеет свой скоуп, мы можем столкнуться с проблемой такого рода.</p>
<h2>9. Тестирование в ручную</h2>
<p>Начинающие разработчики недооценивают силу <strong>TDD</strong> и проверяют весь проект при изменении в какой-то части (ну или не проверяют, тут уже от ответственности зависит). То же самое касается приложений на основе <strong>AngularJS</strong>. А если еще учесть тот факт, что AngularJS изначально разрабатывался как &#8220;хорошо тестируемый&#8221;, а для тестирования в нашем распоряжения есть множество удобных инструментов.</p>
<p>2 самых полулярных тест-ранера это <a title="karma-runner.github.io" href="http://karma-runner.github.io/0.12/index.html"><strong>Karma</strong></a> и <a title="angular.github.io/protractor" href="http://angular.github.io/protractor/#/"><strong>Protractor</strong></a>. <strong>Karma</strong> используется для юнит тестов, а <strong>Protractor</strong> &#8211; для функциональных/интеграционных с подключением Selenium и имитацией &#8220;реальных&#8221; действий пользователя в браузере.</p>
<p>Полезные посты по теме:</p>
<ul>
<li><a title="Testacular в помощь тестированию" href="../../../2013/01/testacular-%d0%b2-%d0%bf%d0%be%d0%bc%d0%be%d1%89%d1%8c-%d1%82%d0%b5%d1%81%d1%82%d0%b8%d1%80%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d1%8e/index.html">Karma(Testacular) в помощь тестированию</a></li>
<li><a title="Тестируем AngularJS используя Protractor" href="../../02/angularjs-protractor/index.html">Тестируем AngularJS используя Protractor</a></li>
<li><a title="Автоматизируем тестирование AngularJS с Protractor" href="../../11/protractor/index.html">Автоматизируем тестирование AngularJS с Protractor</a></li>
</ul>
<p>&nbsp;</p>
<h2>10. Использование jQuery</h2>
<p>Просто прекратите использовать jQuery. Серьезно! Только так вы сможете отвыкнуть от микро-проектирования &#8220;плагинчиками&#8221; и перейти к более маштабному модульному подходу.</p>
<p>Тема подробно раскрыта в посте &#8220;<a title="Как правильно готовить Angular" href="../../07/%d0%ba%d0%b0%d0%ba-%d0%bf%d1%80%d0%b0%d0%b2%d0%b8%d0%bb%d1%8c%d0%bd%d0%be-%d0%b3%d0%be%d1%82%d0%be%d0%b2%d0%b8%d1%82%d1%8c-angular/index.html">Как правильно готовить Angular</a>&#8220;.</p>
<h2 id="10-using-jquery"></h2>
<h2>Выводы</h2>
<p>AngularJS &#8211; идеальный вариант фреймворка, когда вам нужно перейти от прототипа к реальному много-модульному проекту.  Надеюсь эти советы помогут вам предотвратить значительное количество архитектурных ошибок в вашем растущем проекте.</p>
			</div><!-- .entry-content -->

	<footer class="entry-meta">
		This entry was posted in <a href="../../../category/%d1%85%d0%be%d1%87%d1%83-%d1%81%d0%b4%d0%b5%d0%bb%d0%b0%d1%82%d1%8c-%d0%bc%d0%b8%d1%80-%d0%bb%d1%83%d1%87%d1%88%d0%b5/index.html" rel="category tag">Хочу сделать мир лучше</a> and tagged <a href="../../../tag/angularjs/index.html" rel="tag">AngularJs</a>, <a href="../../../tag/javascript/index.html" rel="tag">javascript</a> by <a href="../../../author/admin/index.html">Stepan</a>. Bookmark the <a href="index.html" title="Permalink to Самые распространенные ошибки AngularJS разработчиков" rel="bookmark">permalink</a>.
		
			</footer><!-- .entry-meta -->
</article><!-- #post-2060 -->

					
<div id="disqus_thread"></div>

				
			</div><!-- #content -->
		</div><!-- #primary -->


	</div><!-- #main -->

	<footer id="colophon">

			

			<div id="site-generator">
												<a href="https://wordpress.org/" class="imprint" title="Semantic Personal Publishing Platform">
					Proudly powered by WordPress				</a>
			</div>
	</footer><!-- #colophon -->
</div><!-- #page -->

<script type='text/javascript' src='../../../wp-includes/js/comment-reply.min9b30.js?ver=6.3.1' id='comment-reply-js'></script>
<script type='text/javascript' id='disqus_count-js-extra'>
/* <![CDATA[ */
var countVars = {"disqusShortname":"stepansuvorovblog"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/plugins/disqus-comment-system/public/js/comment_count7ee6.js?ver=3.0.23' id='disqus_count-js'></script>
<script type='text/javascript' id='disqus_embed-js-extra'>
/* <![CDATA[ */
var embedVars = {"disqusConfig":{"integration":"wordpress 3.0.23"},"disqusIdentifier":"2060 http:\/\/stepansuvorov.com\/blog\/?p=2060","disqusShortname":"stepansuvorovblog","disqusTitle":"\u0421\u0430\u043c\u044b\u0435 \u0440\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u043e\u0448\u0438\u0431\u043a\u0438 AngularJS \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432","disqusUrl":"https:\/\/stepansuvorov.com\/blog\/2014\/12\/angularjs-mistakes\/","postId":"2060"};
/* ]]> */
</script>
<script type='text/javascript' src='../../../wp-content/plugins/disqus-comment-system/public/js/comment_embed7ee6.js?ver=3.0.23' id='disqus_embed-js'></script>

</body>

<!-- Mirrored from stepansuvorov.com/blog/2014/12/angularjs-mistakes/ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 11 Feb 2025 14:07:30 GMT -->
</html>
