{"id":2434,"date":"2015-03-14T23:05:51","date_gmt":"2015-03-14T21:05:51","guid":{"rendered":"http:\/\/stepansuvorov.com\/blog\/?p=2434"},"modified":"2015-03-14T23:05:51","modified_gmt":"2015-03-14T21:05:51","slug":"snippet-to-visualise-amount-of-watchers-for-each-angularjs-scope","status":"publish","type":"post","link":"https:\/\/stepansuvorov.com\/blog\/2015\/03\/snippet-to-visualise-amount-of-watchers-for-each-angularjs-scope\/","title":{"rendered":"Snippet to visualise amount of watchers for each AngularJS scope"},"content":{"rendered":"<p><img decoding=\"async\" loading=\"lazy\" class=\"alignnone size-full wp-image-2455\" src=\"https:\/\/stepansuvorov.com\/blog\/wp-content\/uploads\/2015\/03\/Screenshot-2015-03-14-13.48.29.png\" alt=\"watchers-visualisation\" width=\"428\" height=\"355\" \/><\/p>\n<p>I&#8217;ve created snippet to analyse how many watchers you have in your web app and on which elements they are placed.<\/p>\n<p><!--more--><\/p>\n<p>Actually I just extended this <a title=\"http:\/\/ng.malsup.com\/#!\/counting-watchers\" href=\"http:\/\/ng.malsup.com\/#!\/counting-watchers\">piece of code<\/a> and add overlay element visualisation, so now we have (<a title=\"https:\/\/gist.github.com\/stevermeister\/b161d31b0a41da78eafa\" href=\"https:\/\/gist.github.com\/stevermeister\/b161d31b0a41da78eafa\">gist<\/a>):<\/p>\n<p>[javascript]<br \/>\n(function visualizeAngularWatchers() {<br \/>\n  var i, data, scope,<br \/>\n  count = 0,<br \/>\n  all = document.all,<br \/>\n  len = all.length,<br \/>\n  test = {},<br \/>\n  overlayMain = angular.element(&#8216;&lt;div\/&gt;&#8217;);<br \/>\n  overlayMain.css({&#8216;z-index&#8217;: 9999});<br \/>\n  angular.element(document.body).append(overlayMain);<\/p>\n<p>  for (i = 0; i &lt; len; i++) {<br \/>\n    data = angular.element(all[i]).data();<br \/>\n    scope = data.$scope || data.$isolateScope;<br \/>\n    if (scope &amp;&amp; scope.$$watchers) {<br \/>\n      if ( !test[ scope.$id ] ) {<br \/>\n        test[ scope.$id ] = true;<br \/>\n        count += scope.$$watchers.length;<br \/>\n        createOverlay(angular.element(all[i]), scope.$$watchers.length)<br \/>\n      }<br \/>\n    }<br \/>\n  }<\/p>\n<p>  function createOverlay(element, amount){<br \/>\n        var persent = Math.pow(2, amount),<br \/>\n        over = angular.element(&#8216;&lt;div style=&quot;background:rgba(180,120,0,.&#8217; + persent + &#8216;); position:absolute;&quot; \/&gt;&#8217;);<br \/>\n        over.width(element.width());<br \/>\n        over.height(element.height());<br \/>\n        over.offset({ top: element.offset().top, left: element.offset().left})<br \/>\n        overlayMain.append(over);<br \/>\n  }<\/p>\n<p>  return count;<br \/>\n})();<br \/>\n[\/javascript]<\/p>\n<p>and you can run it in console or create code-snippet for Chrome.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>I&#8217;ve created snippet to analyse how many watchers you have in your web app and on which elements they are placed.<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[4],"tags":[120,17,284],"_links":{"self":[{"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/posts\/2434"}],"collection":[{"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/comments?post=2434"}],"version-history":[{"count":2,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/posts\/2434\/revisions"}],"predecessor-version":[{"id":2456,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/posts\/2434\/revisions\/2456"}],"wp:attachment":[{"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/media?parent=2434"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/categories?post=2434"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/tags?post=2434"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}