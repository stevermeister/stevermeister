{"id":3078,"date":"2016-05-28T17:08:06","date_gmt":"2016-05-28T15:08:06","guid":{"rendered":"http:\/\/stepansuvorov.com\/blog\/?p=3078"},"modified":"2016-05-28T17:10:10","modified_gmt":"2016-05-28T15:10:10","slug":"ui-router-default-child-for-abstract-state","status":"publish","type":"post","link":"https:\/\/stepansuvorov.com\/blog\/2016\/05\/ui-router-default-child-for-abstract-state\/","title":{"rendered":"ui-router: Default child for abstract state"},"content":{"rendered":"<p>In version\u00a0<strong>1.0.0alpha0<\/strong> they finally make it possible! Child for abstract states? No! But now at least it&#8217;s possible to create own fix for it due to new\u00a0<strong>$transitionsProvider<\/strong>, in which you could define\u00a0<strong>onBefore<\/strong> hook. You can change the behaviour depends on state options. Let&#8217;s use &#8220;abstract&#8221; property that is boolean and extend it: to make it possible to add child state here:<\/p>\n<p>[javascript]<br \/>\n$transitionsProvider.onBefore({<br \/>\n        to: state =&gt; !!state.abstract<br \/>\n      }, ($transition$, $state) =&gt; {<br \/>\n        if (angular.isString($transition.to().abstract)) {<br \/>\n          return $state.target($transition.to().abstract);<br \/>\n        }<br \/>\n      });<br \/>\n[\/javascript]<\/p>\n<p>basically if abstract param is a string we set it like a target. Example of use:<\/p>\n<p>[javascript]<br \/>\n .state({<br \/>\n          name: &#8216;abstract2&#8217;,<br \/>\n          url: &#8216;\/abstract2&#8217;,<br \/>\n          abstract: &#8216;abstract2.foo&#8217;, \/\/ redirect to &#8216;abstract2.foo&#8217;<br \/>\n          template: &#8216;abstract2&#8217;<br \/>\n        })<br \/>\n[\/javascript]<\/p>\n<p><!--more--><\/p>\n<p>to cover more complex case we could set it like a function:<\/p>\n<p>[javascript]<br \/>\n $transitionsProvider.onBefore({<br \/>\n        to: state =&gt; !!state.abstract<br \/>\n      }, ($transition$, $state, $injector) =&gt; {<br \/>\n        if (angular.isFunction($transition.to().abstract)) {<br \/>\n          return $state.target($injector.invoke($transition.to().abstract))<br \/>\n        }<br \/>\n      });<br \/>\n[\/javascript]<\/p>\n<p>and an example for an abstract state with child that is defined by function:<\/p>\n<p>[javascript]<br \/>\n   .state({<br \/>\n          name: &#8216;abstract3&#8217;,<br \/>\n          url: &#8216;\/abstract3&#8217;,<br \/>\n          abstract: function() {<br \/>\n            return &#8216;abstract3.foo&#8217;<br \/>\n          }, \/\/ Function redirect<br \/>\n          template: &#8216;abstract3&#8217;<br \/>\n        })<br \/>\n[\/javascript]<\/p>\n<p>All code for\u00a0experiments is available\u00a0on <a href=\"http:\/\/plnkr.co\/edit\/vOJlRv9V7fX9G8TNqfKf?p=preview\">plunker<\/a>.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>In version\u00a01.0.0alpha0 they finally make it possible! Child for abstract states? No! But now at least it&#8217;s possible to create own fix for it due to new\u00a0$transitionsProvider, in which you could define\u00a0onBefore hook. You can change the behaviour depends on &hellip; <a href=\"https:\/\/stepansuvorov.com\/blog\/2016\/05\/ui-router-default-child-for-abstract-state\/\">Continue reading <span class=\"meta-nav\">&rarr;<\/span><\/a><\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[4],"tags":[120,17,369],"_links":{"self":[{"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/posts\/3078"}],"collection":[{"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/comments?post=3078"}],"version-history":[{"count":5,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/posts\/3078\/revisions"}],"predecessor-version":[{"id":3083,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/posts\/3078\/revisions\/3083"}],"wp:attachment":[{"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/media?parent=3078"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/categories?post=3078"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/tags?post=3078"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}