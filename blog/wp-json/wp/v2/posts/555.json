{"id":555,"date":"2012-09-07T11:54:30","date_gmt":"2012-09-07T11:54:30","guid":{"rendered":"http:\/\/stepansuvorov.com\/blog\/?p=555"},"modified":"2014-03-08T15:06:23","modified_gmt":"2014-03-08T15:06:23","slug":"node-js-%d1%80%d0%b0%d0%b1%d0%be%d1%82%d0%b0-%d1%81-mysql","status":"publish","type":"post","link":"https:\/\/stepansuvorov.com\/blog\/2012\/09\/node-js-%d1%80%d0%b0%d0%b1%d0%be%d1%82%d0%b0-%d1%81-mysql\/","title":{"rendered":"Node.js \u0440\u0430\u0431\u043e\u0442\u0430 \u0441 MySQL"},"content":{"rendered":"<p><img decoding=\"async\" loading=\"lazy\" class=\"alignnone size-full wp-image-556\" title=\"mysql_node\" src=\"https:\/\/stepansuvorov.com\/blog\/wp-content\/uploads\/2012\/09\/mysql_node.png\" alt=\"\" width=\"128\" height=\"128\" \/><\/p>\n<p>\u0415\u0441\u043b\u0438 \u0443\u0436\u0435 \u043c\u044b \u0440\u0435\u0448\u0438\u043b\u0438\u0441\u044c \u0437\u0430\u043d\u044f\u0442\u044c\u0441\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u044b\u043c \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c, \u0442\u043e \u0431\u0435\u0437 \u0431\u0430\u0437\u044b \u043d\u0435 \u043e\u0431\u043e\u0439\u0442\u0438\u0441\u044c. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0440\u0430\u0437\u0431\u0435\u0440\u0435\u043c \u043a\u0430\u043a \u0434\u043e\u043b\u0436\u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441\u0432\u044f\u0437\u043a\u0430 <strong>node.js<\/strong> \u0438 <strong>mySQL<\/strong>.<\/p>\n<p><!--more-->\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u0438\u043c \u043c\u043e\u0434\u0443\u043b\u044c \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0431\u0430\u0437\u043e\u0439:<\/p>\n<pre>npm install mysql<\/pre>\n<p>\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u043e\u0431\u044a\u0435\u043a\u0442 \u043c\u043e\u0434\u0443\u043b\u044f:<\/p>\n<p>[javascript]var mysql = require(&#8216;mysql&#8217;);[\/javascript]<\/p>\n<p>\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435:<\/p>\n<p>[javascript]var client = mysql.createClient();<br \/>\nclient.host=&#8217;127.0.0.1&#8242;;<br \/>\nclient.port= &#8216;3306&#8217;;<br \/>\nclient.user=&#8217;someuser&#8217;;<br \/>\nclient.password=&#8217;userpass&#8217;;<br \/>\nclient.database=&#8217;node&#8217;;[\/javascript]<\/p>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043c\u043e\u0436\u0435\u043c \u043f\u043e\u0441\u044b\u043b\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043a \u0431\u0430\u0437\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u043c\u0435\u0442\u043e\u0434\u00a0 <code>client.query()<\/code>, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0438\u043c\u0435\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441:<\/p>\n<p>[javascript]client.query(query, [params, callback])[\/javascript]<\/p>\n<p>\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043c \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0432\u044b\u0431\u043e\u0440\u043a\u0443 \u0434\u0430\u043d\u043d\u044b\u0445:<\/p>\n<p>[javascript]client.query(&#8216;SELECT * FROM users&#8217;, function(error, result, fields){<br \/>\n    console.log(result);<br \/>\n}); [\/javascript]<\/p>\n<p>\u0447\u0442\u043e\u0431\u044b \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0434\u0435\u043b\u0430\u0435\u043c:<\/p>\n<p>[javascript]client.end();[\/javascript]<\/p>\n<p>\u0411\u043e\u043b\u0435\u0435 \u0441\u043b\u043e\u0436\u043d\u044b\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u044b \u043f\u043e\u0442\u043e\u043c.<\/p>\n<p>UPD: \u043f\u043e \u043f\u0440\u043e\u0441\u044c\u0431\u0430\u043c \u0442\u0440\u0443\u0434\u044f\u0449\u0438\u0445\u0441\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u044e \u043f\u043e\u0441\u0442.<\/p>\n<p>\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u043c\u0441\u044f:<\/p>\n<p>[javascript]<br \/>\nvar connection = mysql.createConnection({<br \/>\n  host     : &#8216;localhost&#8217;,<br \/>\n  user     : &#8216;root&#8217;,<br \/>\n  password : &#8216;secret&#8217;<br \/>\n});<br \/>\n[\/javascript]<\/p>\n<p>\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438:<\/p>\n<p>[javascript]<br \/>\nvar query = connection.query(&#8216;INSERT INTO users SET ?&#8217;, user, function(err, result) {<br \/>\n  console.log(err);<br \/>\n  console.log(result);<br \/>\n});<br \/>\n[\/javascript]<\/p>\n<p>\u0413\u0434\u0435 <em>user<\/em> &#8211; \u044d\u0442\u043e \u043e\u0431\u044a\u0435\u043a\u0442 \u0441 \u0434\u0430\u043d\u043d\u044b\u043c\u0438.<\/p>\n<p>\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435:<\/p>\n<p>[javascript]<br \/>\nvar query = connection.query(&#8216;UPDATE users SET ? WHERE id = 9&#8217;, user, function(err, result) {<br \/>\n  console.log(err);<br \/>\n  console.log(result);<br \/>\n});<br \/>\n[\/javascript]<\/p>\n<p>\u041c\u043e\u0436\u043d\u043e \u0442\u0430\u043a\u0436\u0435 \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043c\u0435\u0442\u043e\u0434 query:<\/p>\n<p>[javascript]<br \/>\nconnection.config.queryFormat = function (query, values) {<br \/>\n  if (!values) return query;<br \/>\n  return query.replace(\/\\:(\\w+)\/g, function (txt, key) {<br \/>\n    if (values.hasOwnProperty(key)) {<br \/>\n      return this.escape(values[key]);<br \/>\n    }<br \/>\n    return txt;<br \/>\n  }.bind(this));<br \/>\n};<br \/>\n[\/javascript]<\/p>\n<p>\u0438 \u0442\u043e\u0433\u0434\u0430 \u043c\u043e\u0436\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441:<\/p>\n<p>[javascript]<br \/>\nconnection.query(&quot;UPDATE posts SET title = :title&quot;, { title: &quot;Hello MySQL&quot; });<br \/>\n[\/javascript]<\/p>\n<p>\u0412\u043e\u0442 <a href=\"https:\/\/github.com\/felixge\/node-mysql\">\u0442\u0443\u0442<\/a> \u0434\u043e\u0432\u043e\u043b\u044c\u043d\u043e \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u043c\u0430\u043d\u0443\u0430\u043b \u043f\u043e\u044f\u0432\u0438\u043b\u0441\u044f, \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0435\u0449\u0435 \u043d\u0435 \u0431\u044b\u043b\u043e \u043d\u0430 \u043c\u043e\u043c\u0435\u043d\u0442 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430.<\/p>\n<p>&nbsp;<\/p>\n","protected":false},"excerpt":{"rendered":"<p>\u0415\u0441\u043b\u0438 \u0443\u0436\u0435 \u043c\u044b \u0440\u0435\u0448\u0438\u043b\u0438\u0441\u044c \u0437\u0430\u043d\u044f\u0442\u044c\u0441\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u043d\u044b\u043c \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c, \u0442\u043e \u0431\u0435\u0437 \u0431\u0430\u0437\u044b \u043d\u0435 \u043e\u0431\u043e\u0439\u0442\u0438\u0441\u044c. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u0440\u0430\u0437\u0431\u0435\u0440\u0435\u043c \u043a\u0430\u043a \u0434\u043e\u043b\u0436\u043d\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441\u0432\u044f\u0437\u043a\u0430 node.js \u0438 mySQL.<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[4],"tags":[17,32,18],"_links":{"self":[{"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/posts\/555"}],"collection":[{"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/comments?post=555"}],"version-history":[{"count":3,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/posts\/555\/revisions"}],"predecessor-version":[{"id":558,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/posts\/555\/revisions\/558"}],"wp:attachment":[{"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/media?parent=555"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/categories?post=555"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/tags?post=555"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}