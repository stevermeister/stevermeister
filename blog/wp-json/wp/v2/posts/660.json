{"id":660,"date":"2012-10-11T10:22:51","date_gmt":"2012-10-11T10:22:51","guid":{"rendered":"http:\/\/stepansuvorov.com\/blog\/?p=660"},"modified":"2016-02-28T17:28:55","modified_gmt":"2016-02-28T15:28:55","slug":"jasmine-%d0%b8-%d1%8e%d0%bd%d0%b8%d1%82-%d1%82%d0%b5%d1%81%d1%82%d1%8b","status":"publish","type":"post","link":"https:\/\/stepansuvorov.com\/blog\/2012\/10\/jasmine-%d0%b8-%d1%8e%d0%bd%d0%b8%d1%82-%d1%82%d0%b5%d1%81%d1%82%d1%8b\/","title":{"rendered":"Jasmine \u0438 \u044e\u043d\u0438\u0442 \u0442\u0435\u0441\u0442\u044b"},"content":{"rendered":"<p><img decoding=\"async\" loading=\"lazy\" class=\"alignnone size-full wp-image-661\" title=\"jasmine_logo\" src=\"https:\/\/stepansuvorov.com\/blog\/wp-content\/uploads\/2012\/10\/jasmine_logo.png\" alt=\"\" width=\"282\" height=\"90\" \/><\/p>\n<p>Jasmine \u043d\u0430 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u043e\u0434\u043d\u0430 \u0438\u0437 \u0441\u0430\u043c\u044b\u043c \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0445 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a \u0434\u043b\u044f \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438 \u044e\u043d\u0438\u0442 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f JavaScript.<\/p>\n<p>\u041d\u0430 \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u043c \u0441\u0430\u0439\u0442\u0435 \u0435\u0441\u0442\u044c \u0434\u043e\u0432\u043e\u043b\u044c\u043d\u043e \u0445\u043e\u0440\u043e\u0448\u0438\u0439 <a href=\"http:\/\/pivotal.github.com\/jasmine\/\">\u0431\u044b\u0441\u0442\u0440\u044b\u0439 \u0441\u0442\u0430\u0440\u0442<\/a> \u0441 \u043f\u0440\u0438\u043c\u0435\u0440\u0430\u043c\u0438, \u043d\u043e \u0435\u0441\u043b\u0438 \u0432\u0441\u0435 \u0436\u0435 \u0445\u043e\u0447\u0435\u0442\u0441\u044f \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u0438 \u0441 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f\u043c\u0438 &#8211; \u0442\u043e \u0434\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0434 \u043a\u0430\u0442.<\/p>\n<p><!--more-->\u041f\u0435\u0440\u0432\u044b\u043c \u0434\u0435\u043b\u043e\u043c \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u0435\u043c \u0441\u0435\u0431\u0435 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0443 \u0441 <a href=\"http:\/\/github.com\/pivotal\/jasmine\/downloads\">\u043e\u0444\u0441\u0430\u0439\u0442\u0430<\/a>. \u0414\u0430\u043b\u0435\u0435 \u0441\u043e\u0437\u0434\u0430\u0435\u043c \u0441\u0435\u0431\u0435 <a title=\"\u0432\u043e\u0442 \u0433\u043e\u0442\u043e\u0432\u0430\u044f, \u0435\u0441\u043b\u0438 \u043b\u0435\u043d\u044c \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c ;)\" href=\"http:\/\/jsfiddle.net\/STEVER\/HVPRB\/\">\u043f\u0435\u0441\u043e\u0447\u043d\u0438\u0446\u0443<\/a> \u0434\u043b\u044f \u044d\u043a\u0441\u043f\u0435\u0440\u0438\u043c\u0435\u043d\u0442\u043e\u0432. \u0412\u043c\u0435\u0441\u0442\u0435 \u0441 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u043e\u0439 \u0441\u0440\u0430\u0437\u0443 \u0438\u0434\u0435\u0442 \u043f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f, \u043d\u043e \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0441\u0445\u043e\u0434\u0443 \u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0441\u044f \u0432 \u043d\u0435\u043c \u0431\u0443\u0434\u0435\u0442 \u043d\u0435 \u043f\u0440\u043e\u0441\u0442\u043e. \u0411\u043e\u043b\u0435\u0435 \u043f\u0440\u043e\u0441\u0442\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0433\u043b\u044f\u0434\u0435\u0442\u044c \u0442\u0430\u043a:<\/p>\n<pre>&lt;!DOCTYPE HTML&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n\u00a0 &lt;meta charset=\"utf-8\"&gt;\r\n\u00a0 &lt;link rel=\"stylesheet\" type=\"text\/css\" href=\"jasmine.css\"&gt;\r\n\u00a0 &lt;script type=\"text\/javascript\" src=\"jasmine.js\"&gt;&lt;\/script&gt;\r\n\u00a0 &lt;script type=\"text\/javascript\" src=\"tests.js\"&gt;&lt;\/script&gt;\r\n\u00a0 &lt;script type=\"text\/javascript\"&gt;\r\n\u00a0\u00a0\u00a0\u00a0\u00a0 var jasmineEnv = jasmine.getEnv();\r\n\u00a0\u00a0\u00a0\u00a0\u00a0 jasmineEnv.specFilter = function(spec) {\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 console.log(spec);\r\n\u00a0\u00a0\u00a0\u00a0\u00a0 };\r\n\u00a0\u00a0\u00a0\u00a0\u00a0 window.onload = function() {jasmineEnv.execute();};\r\n\u00a0 &lt;\/script&gt;\r\n&lt;\/head&gt;\r\n&lt;body&gt;&lt;\/body&gt;\r\n&lt;\/html&gt;<\/pre>\n<pre>tests.js - \u0444\u0430\u0439\u043b, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u043c\u044b \u043e\u043f\u0438\u0448\u0435\u043c \u043d\u0430\u0448\u0438 \u0442\u0435\u0441\u0442\u044b<\/pre>\n<pre>jasmine.getEnv - \u0430\u043d\u0430\u043b\u043e\u0433 \u0441\u0438\u043d\u0433\u043b\u0442\u043e\u043d\u0430 \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0433\u043e \u043e\u0431\u044a\u0435\u043a\u0442\u0430<\/pre>\n<pre>jasmineEnv.specFilter - callback \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432<\/pre>\n<p>\u0421\u0440\u0430\u0437\u0443 \u043c\u043e\u0434\u0443\u043b\u044c \u0434\u043b\u044f \u0440\u0435\u043d\u0434\u0435\u0440\u0430 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432(jasmine-html.js) \u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u043c \u0435\u0433\u043e. \u0418\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u043a\u043e\u0434 \u0431\u0443\u0434\u0435\u0442 \u0442\u0430\u043a\u043e\u0439:<\/p>\n<pre>&lt;!DOCTYPE HTML&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n\u00a0 &lt;meta charset=\"utf-8\"&gt;\r\n\u00a0 &lt;link rel=\"stylesheet\" type=\"text\/css\" href=\"jasmine.css\"&gt;\r\n\u00a0 &lt;script type=\"text\/javascript\" src=\"jasmine.js\"&gt;&lt;\/script&gt;\r\n\u00a0 &lt;script type=\"text\/javascript\" src=\"jasmine-html.js\"&gt;&lt;\/script&gt;\r\n\u00a0 &lt;script type=\"text\/javascript\" src=\"tests.js\"&gt;&lt;\/script&gt;\r\n\u00a0 &lt;script type=\"text\/javascript\"&gt;\r\n\u00a0\u00a0\u00a0\u00a0\u00a0 var jasmineEnv = jasmine.getEnv();\r\n\u00a0\u00a0\u00a0\u00a0\u00a0 var htmlReporter = new jasmine.HtmlReporter();\r\n\u00a0\u00a0\u00a0\u00a0\u00a0 jasmineEnv.addReporter(htmlReporter);\r\n\u00a0\u00a0\u00a0\u00a0\u00a0 jasmineEnv.specFilter = function(spec) {\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 return htmlReporter.specFilter(spec);\r\n\u00a0\u00a0\u00a0\u00a0\u00a0 };\r\n\r\n\u00a0\u00a0\u00a0\u00a0\u00a0 window.onload = function() {jasmineEnv.execute();};\r\n\u00a0 &lt;\/script&gt;\r\n&lt;\/head&gt;\r\n&lt;body&gt;&lt;\/body&gt;\r\n&lt;\/html&gt;<\/pre>\n<p>\u041f\u0435\u0441\u043e\u0447\u043d\u0438\u0446\u0430 \u0435\u0441\u0442\u044c, \u0442\u0435\u043f\u0435\u0440\u044c \u043c\u043e\u0436\u0435\u043c \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u0442\u044c \u043a \u044d\u043a\u0441\u043f\u0435\u0440\u0438\u043c\u0435\u043d\u0442\u0430\u043c \u0432 tests.js:<\/p>\n<pre>describe(\"Jasmine\", function() {\r\n  it(\"makes testing JavaScript awesome!\", function() {\r\n    expect(true).toBe(true);\r\n  });\r\n});<\/pre>\n<pre>describe - \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0431\u043b\u043e\u043a\u0430 \u0442\u0435\u0441\u0442\u043e\u0432<\/pre>\n<pre>it - \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u0435\u0441\u0442\u0430<\/pre>\n<p>* describe \u043c\u043e\u0436\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u0432 \u0441\u0435\u0431\u044f \u0434\u0440\u0443\u0433\u043e\u0439\u00a0describe (\u0435\u0441\u043b\u0438 \u043d\u0443\u0436\u043d\u044b \u043f\u043e\u0434\u0441\u0435\u043a\u0446\u0438\u0438)<\/p>\n<p>\u0434\u0430\u043b\u0435\u0435 \u0438\u0434\u0435\u0442 \u0441\u0430\u043c \u0442\u0435\u0441\u0442:<\/p>\n<pre>expect(true).toBe(true);<\/pre>\n<p>\u043f\u043e\u043d\u044f\u0442\u043d\u043e\u0435 \u0434\u0435\u043b\u043e, \u0447\u0442\u043e \u0432\u043c\u0435\u0441\u0442\u043e <em>true<\/em> \u0442\u0443\u0442 \u0431\u0443\u0434\u0435\u0442 2 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0440\u0430\u0432\u043d\u044b. \u041a\u0430\u043a\u0438\u0435 \u0435\u0449\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u044b \u0434\u043b\u044f \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u044f?<\/p>\n<pre>expect(true).not.toBe(true);<\/pre>\n<pre>expect(a).toEqual(b);<\/pre>\n<p>\u041e\u0442\u043b\u0438\u0447\u0438\u0435 <strong>toEqual<\/strong> \u043e\u0442 <strong>toBe<\/strong> \u0432 \u0442\u043e\u043c, \u0447\u0442\u043e toBe &#8211; \u044d\u0442\u043e \u0441\u0442\u0440\u043e\u0433\u043e\u0435 \u0441\u0441\u044b\u043b\u043e\u0447\u043d\u043e\u0435 \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 (\u0434\u043b\u044f \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 <em>a = b = {}<\/em> ), \u0430 \u0432 \u0441\u043b\u0443\u0447\u0430\u0435 \u0441 toEqual &#8211; \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u0435 \u043f\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u043c\u0443( <em>a = {}, b = {}<\/em> ). \u0412\u043e \u0432\u0442\u043e\u0440\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 toBe \u0432\u0435\u0440\u043d\u0435\u0442 <strong>fail<\/strong>.<\/p>\n<p>\u0422\u0430\u043a\u0436\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u044b \u0434\u043b\u044f \u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043f\u043e\u0434\u0441\u0442\u0440\u043e\u043a\u0438:<\/p>\n<pre>var message = 'foo bar baz';\r\n\r\nexpect(message).toMatch(\/bar\/);\r\nexpect(message).toMatch('bar');\r\nexpect(message).not.toMatch('bar');<\/pre>\n<p>\u041b\u0438\u0431\u043e \u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435:<\/p>\n<pre>var a = { foo: 'foo' };\r\n\r\nexpect(a.foo).toBeDefined();\r\nexpect(a.bar).not.toBeDefined();<\/pre>\n<p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442\u044b \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 null \u0438 undefinded:<\/p>\n<pre>expect(a).not.toBeUndefined();\r\nexpect(b).toBeUndefined();\r\n\r\nexpect(a).toBeNull();\r\nexpect(b).not.toBeNull();<\/pre>\n<p>\u0410\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u043c\u0435\u0442\u043e\u0434\u044b: toBeTruthy, toBeFalsy, toContain(\u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432 \u043c\u0430\u0441\u0441\u0438\u0432\u0435), toBeLessThan, toBeGreaterThan, toBeCloseTo.<\/p>\n<p>\u0415\u0441\u043b\u0438 \u043c\u044b \u0437\u0430\u0445\u043e\u0442\u0438\u043c \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0438\u043c\u044f \u043a\u043b\u0430\u0441\u0441\u0430 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440\u0430( \u0430\u043d\u0430\u043b\u043e\u0433 instanceof):<\/p>\n<pre>expect({}).toEqual(jasmine.any(Object));\r\nexpect(12).toEqual(jasmine.any(Number));<\/pre>\n<p>\u0422\u0430\u043a\u0436\u0435 \u0435\u0441\u0442\u044c \u043c\u0435\u0442\u043e\u0434 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439:<\/p>\n<pre>var foo = function() {\r\n  return 1 + 2;\r\n};\r\nvar bar = function() {\r\n  return a + 1;\r\n};\r\n\r\nexpect(foo).not.toThrow();\r\nexpect(bar).toThrow();<\/pre>\n<p>\u0412 \u0433\u0440\u0443\u043f\u043f\u0435 \u0442\u0435\u0441\u0442\u043e\u0432 \u043c\u044b \u043c\u043e\u0436\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0438 <strong>beforeEach<\/strong> \u0438 <strong>afterEach<\/strong>, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043c\u044b \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c \u0447\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0434\u043e\/\u043f\u043e\u0441\u043b\u0435 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0442\u0435\u0441\u0442\u0430:<\/p>\n<pre>describe(\"A spec\", function() {\r\n  var foo;\r\n\r\n  beforeEach(function() {\r\n    foo = new Object;\r\n  });\r\n\r\n  afterEach(function() {\r\n    foo = null;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 expect(bar).toBeNull();\r\n  });\r\n\r\n  it(\"first test\", function() {\r\n    expect(foo).toEqual(1);\r\n  });\r\n\r\n  it(\"second test\", function() {\r\n    expect(foo).toEqual(1);\r\n  });<\/pre>\n<p>\u0413\u0440\u0443\u043f\u043f\u044b \u0438 \u0442\u0435\u0441\u0442\u044b \u043e\u0431\u043b\u0430\u0434\u0430\u044e\u0442 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u043e\u0439 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u044c\u044e, \u0435\u0441\u043b\u0438 \u043c\u044b \u043f\u043e\u0441\u0442\u0430\u0432\u0438\u043c \u043f\u0435\u0440\u0435\u0434 <em>describe<\/em> \u0438\u043b\u0438 <em>it<\/em> \u0441\u0438\u043c\u0432\u043e\u043b <em>x<\/em>, \u0442.\u0435. <strong>x<em>describe<\/em><\/strong> \u0438 <strong><em>xit<\/em><\/strong>, \u0442\u043e \u043e\u043d\u0438 \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u043e\u0438\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b. (\u041f\u0440\u0438 \u044d\u0442\u043e\u043c \u043e\u0448\u0438\u0431\u043a\u0430 \u043e \u0442\u043e\u043c, \u0447\u0442\u043e \u043c\u0435\u0442\u043e\u0434 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d, \u0432\u044b\u0437\u0432\u0430\u043d\u0430 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442)<\/p>\n<p>\u0415\u0449\u0435 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e Jasmine \u043c\u044b \u043c\u043e\u0436\u0435\u043c \u0432\u044b\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c <strong>\u043d\u0430\u0431\u043b\u044e\u0434\u0430\u0442\u0435\u043b\u0435\u0439<\/strong>(observer) \u043d\u0430 \u0440\u0430\u0437\u043d\u044b\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u044b \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043c\u0435\u0442\u043e\u0434\u0430 <strong>spyOn<\/strong>:<\/p>\n<pre>beforeEach(function() {\r\n    spyOn(foo, 'setBar');expect({}).toEqual(jasmine.any(Object)); expect(12).toEqual(jasmine.any(Number));\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 expect(bar).toBeNull();\r\n    foo.setBar(123);\r\n    foo.setBar(456, 'another param');\r\n  });<\/pre>\n<p>\u041f\u043e\u0441\u043b\u0435 \u0447\u0435\u0433\u043e \u0441\u0442\u0430\u043d\u0443\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438:<\/p>\n<pre>expect(foo.setBar).toHaveBeenCalled();\r\nexpect(foo.setBar.calls.length).toEqual(2);\r\nexpect(foo.setBar).toHaveBeenCalledWith(123);\r\nexpect(foo.setBar).toHaveBeenCalledWith(456, 'another param');\r\nexpect(foo.setBar.mostRecentCall.args[0]).toEqual(456);\r\nexpect(foo.setBar.calls[0].args[0]).toEqual(123);<\/pre>\n<p>\u0414\u043b\u044f \u043c\u0435\u0442\u043e\u0434\u0430\u00a0<strong>spyOn<\/strong> \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0440\u044f\u0434 \u043d\u0430\u0434\u0441\u0442\u0440\u043e\u0435\u043a:<\/p>\n<pre>spyOn(foo, 'getBar').andCallThrough(); \/\/ \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0430\u0435\u043c \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0438\r\nspyOn(foo, 'getBar').andReturn(745); \/\/ \u043f\u043e\u0434\u043c\u0435\u043d\u044f\u0435\u043c \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\r\nspyOn(foo, 'getBar').andCallFake(function() {return 1001;}); \/\/ \u043f\u043e\u0434\u043c\u0435\u043d\u044f\u0435\u043c \u043c\u0435\u0442\u043e\u0434<\/pre>\n<p>\u0438 \u0431\u043e\u043b\u0435\u0435 \u0441\u043b\u043e\u0436\u043d\u044b\u0435:<\/p>\n<pre>setBar = jasmine.createSpy('setBar');\r\nfoo = jasmine.createSpyObj('foo', ['setBar']);<\/pre>\n<p>\u041f\u043e \u0441\u0443\u0442\u0438 \u0442\u043e\u0436\u0435 \u0441\u0430\u043c\u043e\u0435 \u0447\u0442\u043e \u0438 spyOn(foo, &#8216;setBar&#8217;), \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0443\u0442 \u043c\u044b \u043c\u043e\u0436\u0435\u043c \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043d\u0430\u0431\u043b\u044e\u0434\u0430\u0442\u0435\u043b\u044c \u043d\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u044e(\u043a\u0430\u043a \u0432 \u043f\u0435\u0440\u0432\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435), \u0430 \u043d\u0435 \u043d\u0430 \u043c\u0435\u0442\u043e\u0434 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u0438 \u0434\u0435\u043b\u0430\u0442\u044c \u044d\u0442\u043e \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438(\u0444\u043e\u0440\u043c\u0438\u0440\u0443\u044f \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438).<\/p>\n<p>\u0412 \u0441\u043b\u0443\u0447\u0430\u0435, \u043a\u043e\u0433\u0434\u0430 \u043c\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0441\u0442\u0438 \u0442\u0435\u0441\u0442 \u0447\u0435\u0440\u0435\u0437 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u043f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0442\u0435\u0441\u0442\u0438\u0440\u0443\u0435\u043c\u043e\u0433\u043e \u043a\u043e\u0434\u0430, \u043d\u0430 \u043f\u043e\u043c\u043e\u0449\u044c \u043d\u0430\u043c \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442 \u043c\u0435\u0442\u043e\u0434<strong> jasmine.Clock<\/strong>( \u0430\u043d\u0430\u043b\u043e\u0433 setTimeOut):<\/p>\n<pre>var timerCallback;\r\nbeforeEach(function() {\r\n   \u00a0timerCallback = jasmine.createSpy('timerCallback');\r\n    jasmine.Clock.useMock();\r\n  });\r\n\r\nit(\"causes a timeout to be called synchronously\", function() {\r\n    setTimeout(function() {\r\n      timerCallback(); \/\/ \u044d\u0442\u043e \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 100\u043c\u0441\r\n    }, 100);\r\n\r\n    expect(timerCallback).not.toHaveBeenCalled(); \/\/ \u0435\u0449\u0435 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043b\u0430\u0441\u044c\r\n\r\n    jasmine.Clock.tick(101); \/\/ \u0436\u0434\u0435\u043c 101 \u043c\u0441\r\n\r\n    expect(timerCallback).toHaveBeenCalled(); \/\/ \u0443\u0436\u0435 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u043b\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c\u0441\u044f\r\n  });<\/pre>\n<p>&nbsp;<\/p>\n<p>\u0410 \u0441\u0435\u0439\u0447\u0430\u0441 \u0440\u0430\u0437\u0431\u0435\u0440\u0435\u043c \u0441\u0430\u043c\u043e\u0435 \u0441\u043b\u043e\u0436\u043d\u043e\u0435 \u043c\u0435\u0441\u0442\u043e \u0432\u043e \u0432\u0441\u0435\u0439 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0435 &#8211; <strong>\u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0435<\/strong> \u0442\u0435\u0441\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e \u043c\u043e\u0435\u043c\u0443 \u043c\u043d\u0435\u043d\u0438\u044e \u043e\u0447\u0435\u043d\u044c \u0441\u043b\u0430\u0431\u043e \u0440\u0430\u0437\u043e\u0431\u0440\u0430\u043d\u044b \u0432 \u043f\u0440\u0438\u043c\u0435\u0440\u0430\u0445 \u043d\u0430 \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u043c \u0441\u0430\u0439\u0442\u0435. \u0421\u043e\u0437\u0434\u0430\u044e\u0442\u0441\u044f \u043e\u043d\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043e\u0447\u0435\u0440\u0435\u0434\u0435\u0439 \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u0447\u0435\u0440\u0435\u0437 \u043c\u0435\u0442\u043e\u0434\u044b <strong>runs<\/strong>() \u0438 <strong>waitsFor<\/strong>().\u00a0 \u0412 \u043c\u0435\u0442\u043e\u0434 <strong>runs<\/strong>() \u043c\u044b \u043f\u0435\u0440\u0435\u0434\u0430\u0435\u043c \u043d\u0430\u0448\u0438 \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f, \u0430 \u0432 <strong>waitsFor<\/strong>() \u043f\u0440\u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u043c \u0443\u0441\u043b\u043e\u0432\u0438\u0435, \u043f\u043e \u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443 \u043c\u044b \u0443\u0437\u043d\u0430\u0435\u043c \u0447\u0442\u043e \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e &#8211; \u043e\u0431\u044b\u0447\u043d\u043e \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u0430\u044f \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f, \u043a\u0430\u043a \u0444\u043b\u0430\u0433. \u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c \u0443 \u043d\u0430\u0441 \u0435\u0441\u0442\u044c \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0439 \u043c\u0435\u0442\u043e\u0434:<\/p>\n<pre>function asynchFunc(value, callback){\r\n  setTimeout(function() {  \/\/\u0447\u0435\u0440\u0435\u0437 0.5\u0441 \u043e\u043d\r\n    value++;   \/\/ \u0438\u0437\u043c\u0435\u043d\u0438\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\r\n    callback(value); \/\/ \u0438 \u0432\u0435\u0440\u043d\u0435\u0442 \u0435\u0433\u043e \u0447\u0435\u0440\u0435\u0437 callback\r\n  }, 500);\r\n}<\/pre>\n<p>\u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0430\u043f\u0438\u0448\u0435\u043c \u0442\u0435\u0441\u0442 \u0434\u043b\u044f \u043d\u0435\u0433\u043e:<\/p>\n<pre>describe(\"Asynchronous specs\", function() {\r\n\u00a0\u00a0\u00a0 var value, flag;\r\n\r\n\u00a0\u00a0\u00a0 it(\"async test\", function() {\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 runs(function() {\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 flag = false;  \/\/ \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 value = 0;\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 asynchFunc(value, function(x){\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 value = x;\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 flag = true;  \/\/ \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043d\u0430 \u0442\u043e \u0447\u0442\u043e \u0442\u0435\u0441\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 });\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 });\r\n\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 waitsFor(function() {\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 return flag; \/\/ \u0436\u0434\u0435\u0442 \u043a\u043e\u0433\u0434\u0430 \u0444\u043b\u0430\u0433 \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u0441\u044f \u0432 true\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 }, \"Message for timeout case\", 750);\r\n        \/\/ \u043f\u043e\u0441\u043b\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0431\u043b\u043e\u043a \u043a\u043e\u0434\u0430\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 runs(function() {\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 expect(value).toBeGreaterThan(0);\r\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 });\r\n\u00a0\u00a0\u00a0 });\r\n});<\/pre>\n<p>\u041c\u0435\u0442\u043e\u0434 waitsFor \u0438\u043c\u0435\u0435\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0441\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0441:<\/p>\n<pre>waitsFor(conditionCallback, TimeOutMessage, TimeOut)\r\nconditionCallback - \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e\u0449\u0430\u044f true\/false, \u043e\u043d\u0430 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043c\u0435\u0442\u043e\u0434\u043e\u043c waitsFor \u043f\u043e\u043a\u0430 \u043d\u0435 \u0432\u0435\u0440\u043d\u0435\u0442 true \u043b\u0438\u0431\u043e \u043d\u0430\u0441\u0442\u0443\u043f\u0438\u0442 TimeOut\r\nTimeOut - \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u0432\u0440\u0435\u043c\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u043c\u0435\u0442\u043e\u0434\u0430 \u0432 \u043c\u0441\r\nTimeOutMessage - \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043f\u043e \u043f\u0440\u0438\u0445\u043e\u0434\u0443 TimeOut<\/pre>\n<p>\u0418\u0442\u0430\u043a \u0435\u0449\u0435 \u0440\u0430\u0437: \u043c\u044b \u043f\u043e\u043c\u0435\u0449\u0430\u0435\u043c \u043d\u0430\u0448\u0438 \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0432 \u043c\u0435\u0442\u043e\u0434 runs() \u0438 \u043f\u0440\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0438 \u044d\u0442\u043e\u0433\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u043c\u0435\u043d\u044f\u0435\u043c \u0444\u043b\u0430\u0433, \u0430 \u0432 waitsFor() \u043f\u043e\u043c\u0435\u0449\u0430\u0435\u043c \u0444\u0443\u043d\u043a\u0446\u0438\u044e, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0431\u0443\u0434\u0435\u0442 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0442\u044c \u044d\u0442\u043e\u0442 \u0441\u0430\u043c\u044b\u0439 \u0444\u043b\u0430\u0433. \u041f\u0440\u0438\u0447\u0435\u043c \u0442\u0443\u0442 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043a\u0430\u043a \u043e\u0434\u0438\u043d \u0444\u043b\u0430\u0433, \u0442\u0430\u043a \u0438 \u0433\u043e\u0440\u0430\u0437\u0434\u043e \u0431\u043e\u043b\u0435\u0435 \u0441\u043b\u043e\u0436\u043d\u044b\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u0443 \u043d\u0430\u0441 \u0438\u0434\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0445 \u0432\u044b\u0437\u043e\u0432\u043e\u0432).<\/p>\n<p>\u041f\u043e\u043b\u043d\u044b\u0439 \u043f\u0440\u0438\u043c\u0435\u0440 \u0432 <a title=\"asynch test\" href=\"http:\/\/jsfiddle.net\/STEVER\/HVPRB\/3\/\">\u043f\u0435\u0441\u043e\u0447\u043d\u0438\u0446\u0435<\/a>.<\/p>\n<p>\u0416\u0435\u043b\u0430\u044e \u0432\u0430\u043c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u043d\u044b\u0445 \u0442\u0435\u0441\u0442\u043e\u0432!<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Jasmine \u043d\u0430 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u043e\u0434\u043d\u0430 \u0438\u0437 \u0441\u0430\u043c\u044b\u043c \u043f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0445 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a \u0434\u043b\u044f \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u0438 \u044e\u043d\u0438\u0442 \u0442\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f JavaScript. \u041d\u0430 \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u043c \u0441\u0430\u0439\u0442\u0435 \u0435\u0441\u0442\u044c \u0434\u043e\u0432\u043e\u043b\u044c\u043d\u043e \u0445\u043e\u0440\u043e\u0448\u0438\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439 \u0441\u0442\u0430\u0440\u0442 \u0441 \u043f\u0440\u0438\u043c\u0435\u0440\u0430\u043c\u0438, \u043d\u043e \u0435\u0441\u043b\u0438 \u0432\u0441\u0435 \u0436\u0435 \u0445\u043e\u0447\u0435\u0442\u0441\u044f \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u0438 \u0441 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f\u043c\u0438 &#8211; \u0442\u043e \u0434\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0434 \u043a\u0430\u0442.<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[4],"tags":[90,17],"_links":{"self":[{"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/posts\/660"}],"collection":[{"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/comments?post=660"}],"version-history":[{"count":10,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/posts\/660\/revisions"}],"predecessor-version":[{"id":3045,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/posts\/660\/revisions\/3045"}],"wp:attachment":[{"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/media?parent=660"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/categories?post=660"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/stepansuvorov.com\/blog\/wp-json\/wp\/v2\/tags?post=660"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}